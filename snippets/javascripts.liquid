<script>
  {% if template == 'index' %}

    document.addEventListener("click", function (t) {
    const target = t.target.closest(".add-cart-drawer");
    if (!target) return;
    
    t.preventDefault();
    
    const productData = target.closest(".product-data");
    const e = productData.querySelector(".size").value;
    const i = productData.querySelector(".type").value;
    
    let n, a;
    if (target.getAttribute("data-size") === "2") {
        n = i + " / " + e;
        a = productData.querySelector(".variproducts div[data-name='" + n + "']").getAttribute("value");
    } else {
        n = i;
        a = productData.querySelector(".variproducts div[data-name='" + n + "']").getAttribute("value");
    }
    
    document.querySelector(".drawer__inner").classList.add("overlay-applied");
    
    fetch("/cart/add.js", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
        },
        body: JSON.stringify({ quantity: 1, id: a })
    })
    .then(response => response.json())
    .then(function (t) {
        cart_open();
    });
    
    /*
    a = productData.querySelector(".product-name").getAttribute("data-varid");
    
    fetch("/cart/add.js", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
        },
        body: JSON.stringify({ quantity: 1, id: a })
    })
    .then(response => response.json())
    .then(function (t) {
        cart_open();
    });
    */
});

// ============================================================================
// CUSTOM REMOVE BUTTON - Vanilla JS with Event Delegation
// ============================================================================

document.addEventListener('click', function(e) {
  const customRemoveBtn = e.target.closest('.custom_remove_btn');
  if (!customRemoveBtn) return;

  const drawerInner = document.querySelector(".drawer__inner");
  if (drawerInner) {
    drawerInner.classList.add("overlay-applied");
  }

  let dataQuantity = 0;
  let dataQuantity2 = 0;
  let dataQuantitya1 = 0;
  let dataQuantitya2 = 0;
  let dataQuantitya4 = 0;

  let realcount1 = 0;
  let realcount2 = 0;
  let realcount3 = 0;
  let realcount4 = 0;

  // Get real counts from cart items
  const cartItem1 = document.querySelector(".cart__item[dataid='43048672166146']");
  const cartItem2 = document.querySelector(".cart__item[dataid='43096458625282']");
  const cartItem3 = document.querySelector(".cart__item[dataid='43272026063106']");
  const cartItem4 = document.querySelector(".cart__item[dataid='45814306570498']");

  if (cartItem1) {
    const qty1 = cartItem1.querySelector(".cart__quantity");
    realcount1 = qty1 ? parseInt(qty1.value) : 0;
  }

  if (cartItem2) {
    const qty2 = cartItem2.querySelector(".cart__quantity");
    realcount2 = qty2 ? parseInt(qty2.value) : 0;
  }

  if (cartItem3) {
    const qty3 = cartItem3.querySelector(".cart__quantity");
    realcount3 = qty3 ? parseInt(qty3.value) : 0;
  }

  if (cartItem4) {
    const qty4 = cartItem4.querySelector(".cart__quantity");
    realcount4 = qty4 ? parseInt(qty4.value) : 0;
  }

  if (isNaN(realcount1)) realcount1 = 0;
  if (isNaN(realcount2)) realcount2 = 0;
  if (isNaN(realcount3)) realcount3 = 0;
  if (isNaN(realcount4)) realcount4 = 0;

  // Get main count from current item
  const parentCartItem = customRemoveBtn.closest(".cart__item");
  let maincount = 0;
  if (parentCartItem) {
    const customQty = parentCartItem.querySelector(".Custom_cart__quantity");
    maincount = customQty ? parseInt(customQty.value) : 0;
  }

  // Get data-index and addonjin
  const current = customRemoveBtn.getAttribute("data-index");
  const parentContent = customRemoveBtn.closest(".ajaxcart__item-content");
  let addonjin = "";
  if (parentContent) {
    const addonjinEl = parentContent.querySelector(".addonjin");
    addonjin = addonjinEl ? addonjinEl.innerHTML : "";
  }

  // Helper function to update cart
  function updateCart(updates) {
    fetch(window.Shopify.routes.root + 'cart/update.js', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ updates: updates })
    })
    .then(response => response.json())
    .then(() => {
      setTimeout(function() {
        location.reload();
      }, 1000);
    })
    .catch(error => console.error('Error updating cart:', error));
  }

  // Helper function to process cart data
  function processCartData(data, updates) {
    const arrayLength = data.items.length;
    for (let i = 0; i < arrayLength; i++) {
      if (data.items[i].variant_id == '43048672166146') {
        dataQuantity = parseInt(data.items[i].quantity);
      } else if (data.items[i].variant_id == '43096458625282') {
        dataQuantity2 = parseInt(data.items[i].quantity);
      } else if (data.items[i].variant_id == '43272026063106') {
        dataQuantitya1 = parseInt(data.items[i].quantity);
      } else if (data.items[i].variant_id == '43272054112514') {
        dataQuantitya2 = parseInt(data.items[i].quantity);
      } else if (data.items[i].variant_id == '45814306570498') {
        dataQuantitya4 = parseInt(data.items[i].quantity);
      }
    }
    updateCart(updates);
  }

  // Remove item first
  fetch('/cart/change.js', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      quantity: 0,
      line: current
    })
  })
  .then(response => response.json())
  .then(() => {
    // Get cart data
    return fetch(window.Shopify.routes.root + 'cart.js');
  })
  .then(response => response.json())
  .then(data => {
    let updates = {};

    if (addonjin == "both") {
      processCartData(data, {
        43272026063106: realcount3 - maincount,
        43272054112514: realcount3 - maincount,
        43048672166146: realcount1,
        43096458625282: realcount2,
        45814306570498: realcount4
      });

    } else if (addonjin == "logo2") {
      processCartData(data, {
        43272026063106: realcount3,
        43272054112514: realcount3,
        43048672166146: realcount1,
        43096458625282: realcount2 - maincount,
        45814306570498: realcount4
      });

    } else if (addonjin == "title") {
      processCartData(data, {
        43272026063106: realcount3,
        43272054112514: realcount3,
        43048672166146: realcount1 - maincount,
        43096458625282: realcount2,
        45814306570498: realcount4
      });

    } else if (addonjin == "logo") {
      processCartData(data, {
        43272026063106: realcount3,
        43272054112514: realcount3,
        43048672166146: realcount1,
        43096458625282: realcount2,
        45814306570498: realcount4 - maincount
      });

    } else {
      // Default case
      const arrayLength = data.items.length;
      for (let i = 0; i < arrayLength; i++) {
        if (data.items[i].variant_id == '43048672166146') {
          dataQuantity = parseInt(data.items[i].quantity);
        } else if (data.items[i].variant_id == '43096458625282') {
          dataQuantity2 = parseInt(data.items[i].quantity);
        } else if (data.items[i].variant_id == '43272026063106') {
          dataQuantitya1 = parseInt(data.items[i].quantity);
        } else if (data.items[i].variant_id == '43272054112514') {
          dataQuantitya2 = parseInt(data.items[i].quantity);
        } else if (data.items[i].variant_id == '45814306570498') {
          dataQuantitya4 = parseInt(data.items[i].quantity);
        }
      }

      updateCart({
        43272026063106: dataQuantitya1,
        43272054112514: dataQuantitya2,
        43048672166146: dataQuantity,
        43096458625282: dataQuantity2,
        45814306570498: dataQuantitya4
      });
    }
  })
  .catch(error => console.error('Error:', error));

  // Clear form fields
  const namePlacement = document.getElementById("namePlacement");
  const nameFirstline = document.getElementById("nameFirstline");
  const nameSecondline = document.getElementById("nameSecondline");
  const nameColor = document.getElementById("nameColor");
  const logoPlacement = document.getElementById("logoPlacement");
  const logoName = document.getElementById("logoName");
  const initials = document.getElementById("initials");
  const initialsColor = document.getElementById("initialsColor");

  if (namePlacement) namePlacement.value = "";
  if (nameFirstline) nameFirstline.value = "";
  if (nameSecondline) nameSecondline.value = "";
  if (nameColor) nameColor.value = "";
  if (logoPlacement) logoPlacement.value = "";
  if (logoName) logoName.value = "";
  if (initials) initials.value = "";
  if (initialsColor) initialsColor.value = "";

  // Hide elements
  document.querySelectorAll(".addmyname").forEach(el => el.style.display = 'none');
  document.querySelectorAll(".addicon").forEach(el => el.style.display = 'none');

  // Update price display
  const tprice = document.querySelector(".tprice");
  if (tprice) {
    tprice.innerHTML = "18 to $30";
  }

  // Call cart_update if it exists
  setTimeout(function() {
    if (typeof cart_update === 'function') {
      cart_open();
    }
  }, 1000);
});

// ============================================================================
// MUTATION OBSERVER - Watch for dynamically added elements
// ============================================================================

const customRemoveObserver = new MutationObserver(function(mutations) {
  mutations.forEach(function(mutation) {
    if (mutation.addedNodes.length) {
      mutation.addedNodes.forEach(function(node) {
        if (node.nodeType !== 1) return;

        // Check if custom_remove_btn or related elements were added
        if (
          node.matches && (
            node.matches('.custom_remove_btn') ||
            node.matches('.cart__item') ||
            node.matches('.ajaxcart__item-content') ||
            node.querySelector('.custom_remove_btn') ||
            node.querySelector('.cart__item')
          )
        ) {
          console.log('Custom remove button elements detected in DOM');
        }
      });
    }
  });
});

// Start observing
customRemoveObserver.observe(document.body, {
  childList: true,
  subtree: true
});


    document.addEventListener('DOMContentLoaded', function() {
      // Listen on the document (or a closer parent container if you know it)
      document.addEventListener('click', function(event) {
        // Check if the clicked element matches our selector
        if (event.target.closest('.drawer__close-button')) {
          event.preventDefault();
          const cartDrawer = document.querySelector('.drawer--cart');
          if (cartDrawer) {
            cartDrawer.classList.remove('drawer--is-open');
          }
        }
      });
    });

    function cart_open() {
    setTimeout(function () {

        fetch("/", { method: "GET" })
            .then(function (response) {
                return response.text();
            })
            .then(function (i) {
                const drawer = document.querySelector('.drawer--cart');
                drawer.classList.add('drawer--is-open');
                var parser = new DOMParser();
                var doc = parser.parseFromString(i, "text/html");

                document.querySelector(".cart_count_icon").innerHTML =
                    doc.querySelector(".cart_count_icon").innerHTML;

               document.querySelector(".drawer__inner").classList.remove("overlay-applied");

                document.querySelector(".header-main-cart").innerHTML = doc.querySelector(".header-main-cart").innerHTML;
               document.querySelector(".cart_drawer_custom").innerHTML = doc.querySelector(".cart_drawer_custom").innerHTML;

                document.querySelector(".unlockmsg").innerHTML =
                    doc.querySelector(".unlockshtml").innerHTML;

                // still requires jQuery because slick() is a jQuery plugin
                /*
                jQuery(".cart-all-products").slick({
                    dots: true,
                    infinite: true,
                    speed: 300,
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    arrows: true
                });
                */
                document.querySelectorAll("a.open-cart-drawer-new").forEach(el => el.click());
            })
            .catch(function (i) {
                // you had an empty error handler, so kept it empty
            });

    }, 500);
}

function quick_open() {
    document.querySelectorAll("a.open-cart-drawer-new").forEach(el => el.click());
}


document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll(".cart-link").forEach(function (el) {
        el.addEventListener("click", function () {            
            cart_open();
        });
    });
});


document.addEventListener("click", function(t) {
  const plusIcon = t.target.closest(".plus_icon2");
  if (!plusIcon) return;
  
  t.preventDefault();
  
  document.querySelectorAll(".qty-remove").forEach(el => el.classList.add("disabledbutton"));
  
  const cartItem = plusIcon.closest(".cart__item");
  const addonElement = cartItem.querySelector(".addonjin");
  const aj = addonElement ? addonElement.innerHTML : '';
  
  const qtyInput = plusIcon.parentElement.querySelector(".cart__quantity");
  const currentQty = parseInt(qtyInput.value);
  const newQty = currentQty + 1;
  qtyInput.value = newQty;
  
  const lineIndex = qtyInput.getAttribute("data-index");
  
  fetch("/cart/change.js", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({ quantity: newQty, line: lineIndex })
  })
  .then(response => response.json())
  .then(() => {
    if (aj == 'title') {
      return fetch("/cart/add.js", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ "id": '43048672166146', "quantity": 1 })
      }).then(response => response.json());
    }
    
    if (aj == 'logo') {
      return fetch("/cart/add.js", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ "id": '45814306570498', "quantity": 1 })
      }).then(response => response.json());
    }
    
    if (aj == 'logo2') {
      return fetch("/cart/add.js", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ "id": '43096458625282', "quantity": 1 })
      }).then(response => response.json());
    }
    
    if (aj == 'both') {
      return fetch("/cart/add.js", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ "id": '43272026063106', "quantity": 1 })
      })
      .then(response => response.json())
      .then(() => {
        return fetch("/cart/add.js", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ "id": '43272054112514', "quantity": 1 })
        }).then(response => response.json());
      });
    }
  })
  .then(() => {
    cart_open()();
    setTimeout(() => {
      document.querySelectorAll(".qty-remove").forEach(el => el.classList.remove("disabledbutton"));
    }, 1000);
  });
});

document.addEventListener("click", function(t) {
  const minusIcon = t.target.closest(".minus_icon2");
  if (!minusIcon) return;
  
  t.preventDefault();
  
  document.querySelectorAll(".qty-remove").forEach(el => el.classList.add("disabledbutton"));
  
  const cartItem = minusIcon.closest(".cart__item");
  const addonElement = cartItem.querySelector(".addonjin");
  const aj = addonElement ? addonElement.innerHTML : '';
  
  const qtyInput = minusIcon.parentElement.querySelector(".cart__quantity");
  const currentQty = parseInt(qtyInput.value);
  const newQty = currentQty - 1;
  qtyInput.value = newQty;
  
  const lineIndex = qtyInput.getAttribute("data-index");
  
  fetch("/cart/change.js", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({ quantity: newQty, line: lineIndex })
  })
  .then(response => response.json())
  .then(() => {
    if (aj == 'title') {
      return fetch("/cart/update.js", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ updates: { 43048672166146: newQty } })
      }).then(response => response.json());
    }
    
    if (aj == 'logo') {
      return fetch("/cart/update.js", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ updates: { 45814306570498: newQty } })
      }).then(response => response.json());
    }
    
    if (aj == 'logo2') {
      return fetch("/cart/update.js", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ updates: { 43096458625282: newQty } })
      }).then(response => response.json());
    }
    
    if (aj == 'both') {
      return fetch("/cart/update.js", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ 
          updates: { 
            43272026063106: newQty,
            43272054112514: newQty
          } 
        })
      }).then(response => response.json());
    }
  })
  .then(() => {
    cart_open()();
    setTimeout(() => {
      document.querySelectorAll(".qty-remove").forEach(el => el.classList.remove("disabledbutton"));
    }, 1000);
  });
});



  {% endif %}
// nofollow 
document.addEventListener("DOMContentLoaded", function() {
  var links = document.querySelectorAll("a[href^='http']:not([href*='" + window.location.hostname + "'])");
  links.forEach(function(link) {
    link.setAttribute("rel", "nofollow");
  });
});

{% if page.url == '/pages/faq' %}
  window.location.replace("/pages/faqs");
{% endif %}

{% if page.title contains '5 Reasons Your Cheeks' %}
  window.location.replace("/pages/your-day-in-dr-woof-scrubs");
{% endif %}

// cart js 
{% if template contains 'cart' %}
  var checkExist = setInterval(function() {
    var hulkappsCartTotal = document.querySelector('.hulkapps-cart-total');
    if (hulkappsCartTotal) {
      if (hulkapps.discounts.original_price_total != hulkapps.discounts.discounted_price_total) {
        var cartCheckoutBtn = document.querySelector(".btn.cart__checkout");
        if (cartCheckoutBtn) {
          cartCheckoutBtn.insertAdjacentHTML('beforebegin', '<div class="doubly-message" style="margin:1em;text-align:justify; color:  {{ settings.color_warning_text }}; font-size: {{ settings.text_size }}px;font-family: {{ settings.warning_font_new | font_face }}"> {{ settings.volume_text }}</div>');
        }
        clearInterval(checkExist);
      }
    }
  }, 500);
{% endif %}

// load resources
function loadResources() {
  let e = document.getElementsByTagName("link");
  if (e.length > 0) {
    for (let t = 0; t < e.length; ++t) {
      let n = e[t].getAttribute("lazy-href");
      if (n) {
        e[t].setAttribute("href", n);
      }
    }
  }

  let t = document.getElementsByTagName("iframe");
  if (t.length > 0) {
    for (let e = 0; e < t.length; ++e) {
      let n = t[e].getAttribute("lazy-src");
      if (n) {
        t[e].setAttribute("src", n);
      }
    }
  }

  let n = document.getElementsByTagName("script");
  if (n.length > 0) {
    for (let e = 0; e < n.length; ++e) {
      let t = n[e].getAttribute("lazy-src");
      if (t) {
        n[e].setAttribute("src", t);
      }
    }
  }
}

function elementInViewport(e) {
  for (var t = e.offsetTop, n = e.offsetLeft, l = e.offsetWidth, o = e.offsetHeight; e.offsetParent;) {
    t += (e = e.offsetParent).offsetTop;
    n += e.offsetLeft;
  }
  return t < window.pageYOffset + window.innerHeight && n < window.pageXOffset + window.innerWidth && t + o > window.pageYOffset && n + l > window.pageXOffset;
}

function lazyLoadImage() {
  let e = document.getElementsByTagName("img");
  if (e.length > 0) {
    for (let t = 0; t < e.length; ++t) {
      let n = e[t].getAttribute("lazy-src");
      if (n && elementInViewport(e[t]) == 1) {
        e[t].setAttribute("src", n);
      }
    }
  }

  let t = document.getElementsByClassName("__bg");
  if (t.length > 0) {
    for (let e = 0; e < t.length; ++e) {
      let n = t[e].getAttribute("lazy-bg");
      if (n && elementInViewport(t[e]) == 1) {
        t[e].style.backgroundImage = "url(" + n + ")";
        t[e].style.backgroundPosition = "center";
        t[e].style.backgroundSize = "cover";
      }
    }
  }
}

document.addEventListener("scroll", function() {
  loadResources();
  lazyLoadImage();
});

setInterval(function() {
  lazyLoadImage();
}, 1000);
</script>

{% if template.name contains "product" %}
  <script type="text/javascript">
    var afterpay_min = 0.04;
    var afterpay_max = 2000.00;
    var afterpay_product_selector = '.grid-product__price';
    var afterpay_product_css = {
      'margin-bottom': '15px'
    };
    var afterpay_cart_integration_enabled = true;
    var afterpay_cart_static_css = {
      'margin': '15px 0'
    };
    var afterpay_footer_logo_enabled = true;
    var afterpay_shop_currency = {{ shop.currency | json }};
    var afterpay_cart_currency = {{ cart.currency.iso_code | json }};
    var afterpay_shop_money_format = {{ shop.money_format | json }};
    var afterpay_shop_permanent_domain = {{ shop.permanent_domain | json }};
    var afterpay_theme_name = {{ theme.name | json }};
    var afterpay_product = '<span>' + {{ product | json }} + '</span>';
    var afterpay_current_variant = {{ product.selected_or_first_available_variant | json }};
    var afterpay_cart_total_price = {{ cart.total_price | json }};
    var afterpay_js_snippet_version = '1.0.12';
  </script>
  <script type="text/javascript" src="https://static.afterpay.com/shopify-afterpay-javascript.js"></script>
  <script type="text/javascript">
    var afterpay_product = {{ product | json }};
    var afterpay_product_variant = {{ product.selected_or_first_available_variant | json }};
    var afterpay_cart_total_price = {{ cart.total_price | json }};
  </script>
{% endif %}

<script>
// Sort tags 
document.addEventListener("DOMContentLoaded", function() {
  var sortTags = document.getElementById('SortTags');

  if (!sortTags) {
    return;
  }

  sortTags.addEventListener('change', function() {
    location.href = this.value;
  });
});

// WPD Start
{% if customer.tags.size > 0 and template != 'cart' %}
  document.addEventListener('DOMContentLoaded', function() {
    let checkoutbtninterval = setInterval(function() {
      var x = document.querySelectorAll("input[name='checkout'], button[name='checkout'], input[name='goto_pp'], button[name='goto_pp'], input[name='goto_gc'], button[name='goto_gc'], [href$='checkout']");
      var WPD_RedirectToCart = function(e) {
        e.stopPropagation();
        e.preventDefault();
        window.location = '/cart';
      };
      for (var i = 0; i < x.length; i++) {
        x[i].addEventListener('click', WPD_RedirectToCart, false);
      }
    }, 500);
  });
{% endif %}

// page opener
document.addEventListener("DOMContentLoaded", function() {
  var rmqElement = document.querySelector(".rmq-497c0b69");
  if (rmqElement) {
    rmqElement.addEventListener("click", function(e) {
      e.preventDefault();
      window.open('https://www.drwoofapparel.com.au/products/wardrobe-deal', '_blank');
    });
  }
});

// general slider video play
document.addEventListener("DOMContentLoaded", function() {
  var mainProductVideo = document.querySelector(".Main--ProductPhotos .slick-current.slick-active video");
  if (mainProductVideo && typeof jQuery !== 'undefined') {
    jQuery(mainProductVideo).trigger("play");
  }
});

// homepage slider
{% if template == 'index' %}
  document.addEventListener("DOMContentLoaded", function() {
    if (typeof jQuery !== 'undefined' && jQuery.fn.slick) {
      jQuery('.slider-wrapper').slick({
        dots: false,
        infinite: true,
        arrows: true,
        speed: 300,
        focusOnSelect: false,
        slidesToShow: 3
      });
    }
  });
{% endif %}

// newlandingpage scripts
{% if template.suffix == 'newlandingpage' %}
  var colorarray = [];
  {% assign colorname = option.name | handleize %}
  {% for tag in all_products["women-classic-6-pocket-joggers"].tags %}
    {% if tag contains "VariantType" %}
      {% assign collectiontag = tag | split: " - " %}
      {% assign colortag = collectiontag[1] %}
      {% assign messagetag = collectiontag[2] %}
      colorarray.push('{{ tag }}');
    {% endif %}
  {% endfor %}
  {% assign colortag = colortag | handleize %}
  {% assign accolor = option.name | handleize %}

  document.addEventListener("DOMContentLoaded", function() {
    if (typeof jQuery !== 'undefined' && jQuery.fn.slick) {
      jQuery('.mainpdpslider').slick({
        dots: true,
        infinite: true,
        arrows: true,
        speed: 300,
        slidesToShow: 1
      });

      jQuery('.storyslider').slick({
        infinite: true,
        slidesToShow: 4,
        arrows: true,
        slidesToScroll: 1,
        responsive: [
          {
            breakpoint: 480,
            settings: {
              infinite: true,
              slidesToShow: 2,
              arrows: false,
              slidesToScroll: 1
            }
          }
        ]
      });

      jQuery(".product__thumbs-sticky").slick({
        slidesToShow: 6,
        vertical: true,
        arrows: false,
        asNavFor: '.Main--ProductPhotos',
        focusOnSelect: true
      });

      jQuery('.Main--ProductPhotos').slick({
        centerMode: false,
        slidesToShow: 1,
        asNavFor: '.product__thumbs-sticky',
        focusOnSelect: true,
        dots: true,
        arrows: false,
        responsive: [
          {
            breakpoint: 768,
            settings: {
              arrows: false,
              centerMode: false,
              slidesToShow: 1
            }
          },
          {
            breakpoint: 480,
            settings: {
              arrows: true,
              dots: true,
              initialSlide: 1,
              centerMode: true,
              centerPadding: '0',
              slidesToShow: 1
            }
          }
        ]
      });

      jQuery('.popslider').slick({
        infinite: true,
        slidesToShow: 4,
        arrows: false,
        slidesToScroll: 1,
        responsive: [
          {
            breakpoint: 480,
            settings: {
              infinite: true,
              slidesToShow: 1,
              slidesToScroll: 1,
              dots: true,
              arrows: false,
              centerMode: true,
              centerPadding: '40px'
            }
          }
        ]
      });

      jQuery('.blockslider').slick({
        infinite: true,
        slidesToShow: 3,
        arrows: false,
        slidesToScroll: 1,
        responsive: [
          {
            breakpoint: 480,
            settings: {
              infinite: true,
              slidesToShow: 1,
              dots: true,
              arrows: false,
              slidesToScroll: 1,
            }
          }
        ]
      });
    }

    var variantInputs = document.querySelectorAll(".variant-input");
    variantInputs.forEach(function(input) {
      input.addEventListener("click", function() {
        var parentWrapper = this.closest(".variant-wrapper");
        if (parentWrapper) {
          var swatchImages = parentWrapper.querySelectorAll(".swatchwrapper img");
          swatchImages.forEach(function(img) {
            img.style.display = "none";
          });
          var currentSwatchImg = this.querySelector(".swatchwrapper img");
          if (currentSwatchImg) {
            currentSwatchImg.style.display = "block";
          }
        }
      });
    });
  });
{% endif %}

// Product variables
{% assign xxmy_product = all_products[product.metafields.sf_product_combined.product_handle] %}
{% unless xxmy_product.empty? %}
  var aa = {{ xxmy_product.id }};
{% endunless %}

{% assign my_product = all_products[product.metafields.sf_product_combined.third_product] %}
{% unless my_product.empty? %}
  var bb = {{ my_product.id }};
{% endunless %}

{% assign my_product = all_products[product.metafields.sf_product_combined.fourth_product] %}
{% unless my_product.empty? %}
  var cc = {{ my_product.id }};
{% endunless %}

{% assign my_product = all_products[product.metafields.sf_product_combined.fifth_product] %}
{% unless my_product.empty? %}
  var dd = {{ my_product.id }};
{% endunless %}

// fix wrong product featured image
{% unless template.suffix == 'Bundle_Metafield' %}
  document.addEventListener("DOMContentLoaded", function() {
    var productImageMainImgs = document.querySelectorAll(".product-image-main img");
    var productThumbs = document.querySelectorAll(".product__thumbs");

    productImageMainImgs.forEach(function(img) {
      img.style.opacity = "0";
    });

    productThumbs.forEach(function(thumb) {
      thumb.style.opacity = "0";
    });

    var interval = setInterval(function() {
      var slickSlides = document.querySelectorAll(".slick-track .slick-slide");
      if (slickSlides.length) {
        clearInterval(interval);
        {% if template.suffix == 'template-scrubs' %}
          var firstSlide = document.querySelector(".slick-track .slick-slide[data-slick-index='0']");
          if (firstSlide && typeof jQuery !== 'undefined') {
            jQuery(firstSlide).trigger("click");
          }
        {% endif %}

        productImageMainImgs.forEach(function(img) {
          img.style.opacity = "1";
        });

        productThumbs.forEach(function(thumb) {
          thumb.style.opacity = "1";
        });
      }
    }, 1000);

    {% if template.suffix == 'atheltikan' %}
      productImageMainImgs.forEach(function(img) {
        img.style.opacity = "1";
      });

      productThumbs.forEach(function(thumb) {
        thumb.style.opacity = "1";
      });
    {% endif %}
  });
{% endunless %}

{% if template.suffix == 'template-scrubs' %}
  document.addEventListener("DOMContentLoaded", function() {
    
  });
{% endif %}

{% if product.type == 'Surgical Scrub Cap' %}
  window.addEventListener("load", function() {
    var atvElement = document.querySelector(".atv");
    if (atvElement) {
      var varprice = atvElement.getAttribute("data-socvarprice");
      var salePrice = document.querySelector(".product-single__prices .sale-price");
      if (salePrice) {
        salePrice.innerHTML = varprice;
      }
    }
  });

  document.addEventListener("DOMContentLoaded", function() {
    document.addEventListener("click", function(e) {
      if (e.target.classList.contains("btn-primer")) {
        var activerElement = document.querySelector(".activer");
        var capid = activerElement ? activerElement.getAttribute("data-id") : null;
        
        var btnPrimers = document.querySelectorAll(".btn-primer");
        btnPrimers.forEach(function(btn) {
          btn.classList.remove("atv");
        });
        
        e.target.classList.add("atv");
        
        var atvElement = document.querySelector(".atv");
        var varavail = atvElement.getAttribute("data-socavail");
        var varquan = parseInt(atvElement.getAttribute("data-socqty"));
        var varprice = atvElement.getAttribute("data-socvarprice");
        
        var salePrice = document.querySelector(".product-single__prices .sale-price");
        var productPrice = document.querySelector(".product__price");
        
        if (salePrice) {
          salePrice.innerHTML = varprice;
        }
        if (productPrice) {
          productPrice.innerHTML = varprice;
        }
        
        var preorderText = document.querySelector(".preorder-text");
        var preorderDate = document.querySelector(".preorderdate");
        var capsbundleatc = document.querySelector(".capsbundleatc");
        
        if ((varavail == "true") && (varquan <= 0)) {
          if (preorderText) {
            preorderText.style.display = "block";
          }
          if (preorderDate) {
            preorderDate.innerHTML = "November 30";
          }
          if (capsbundleatc) {
            capsbundleatc.innerHTML = "PRE-ORDER";
          }
        } else {
          if (preorderText) {
            preorderText.style.display = "none";
          }
          if (capsbundleatc) {
            if (capsbundleatc.classList.contains("butttonsoldout")) {
              capsbundleatc.innerHTML = "SOLD OUT";
              capsbundleatc.classList.add("soldoutx");
            } else {
              capsbundleatc.innerHTML = "ADD TO CART";
              capsbundleatc.classList.remove("soldoutx");
            }
          }
        }

        var alttag = e.target.innerHTML;
        var thumbImg = document.querySelector(".product__thumb-item img[alt='" + alttag + "']");
        if (thumbImg && typeof jQuery !== 'undefined') {
          jQuery(thumbImg).trigger("click");
        }
        
        var allImgs = document.querySelectorAll("img[alt='" + alttag + "']");
        allImgs.forEach(function(img) {
          var productSlide = img.closest(".product__slide");
          if (productSlide) {
            var index = productSlide.getAttribute('data-index');
            var mainProductPhotos = document.querySelector(".Main--ProductPhotos");
            if (mainProductPhotos && typeof jQuery !== 'undefined' && jQuery.fn.slick) {
              jQuery(mainProductPhotos).slick('slickGoTo', index);
            }
          }
        });
      }
    });

    var interval = setInterval(function() {
      var imageOverlay = document.querySelector(".scrubs-products .image-overlay[data-handle='{{ product.handle }}']");
      if (imageOverlay) {
        imageOverlay.click();
        clearInterval(interval);
      } else {
        var capsbundleatc = document.querySelector(".capsbundleatc");
        var btnPrimers = document.querySelectorAll(".btn-primer");
        
        if (capsbundleatc) {
          capsbundleatc.innerHTML = "SOLD OUT";
          capsbundleatc.classList.add("soldoutx");
        }
        
        btnPrimers.forEach(function(btn) {
          btn.style.display = "none";
        });
        
        clearInterval(interval);
      }
    }, 1000);

    var capsbundleatc = document.querySelector(".capsbundleatc");
    if (capsbundleatc) {
      capsbundleatc.addEventListener("click", function() {
        this.innerHTML = "Preparing..";

        var atvElement = document.querySelector(".atv");
        if (atvElement) {
          var socvarid = atvElement.getAttribute("data-socvarid");
          var socavail = atvElement.getAttribute("data-socavail");

          if (socavail) {
            var dataxc = {
              "id": socvarid,
              "quantity": 1
            };

            if (typeof jQuery !== 'undefined') {
              jQuery.ajax({
                type: 'POST',
                url: '/cart/add.js',
                data: dataxc,
                dataType: 'json',
                success: function() {
                  capsbundleatc.innerHTML = "ADDED TO BAG";
                  if (typeof cart_open === 'function') {
                    cart_open();
                  }
                }
              });
            }
          }
        }
      });
    }

    function addToCart(productsJson) {
      if (typeof jQuery !== 'undefined') {
        jQuery.ajax({
          type: 'POST',
          url: '/cart/add.js',
          data: {
            items: products
          },
          dataType: 'json',
          success: function() {
            alert("Products added to the cart.");
            if (typeof cart_open === 'function') {
              cart_open();
            }
          },
          error: function(jqXHR, textStatus, errorThrown) {
            if (typeof cart_open === 'function') {
              cart_open();
            }
          }
        });
      }
    }

    document.addEventListener("click", function(e) {
      if (e.target.classList.contains("image-overlay")) {
        var capsbundleatc = document.querySelector(".capsbundleatc");
        var btnPrimers = document.querySelectorAll(".btn-primer");
        
        if (capsbundleatc) {
          capsbundleatc.innerHTML = "ADD TO CART";
          capsbundleatc.classList.remove("soldoutx");
        }
        
        btnPrimers.forEach(function(btn) {
          btn.style.display = "block";
        });

        var imageOverlays = document.querySelectorAll(".image-overlay");
        imageOverlays.forEach(function(overlay) {
          overlay.classList.remove("activer");
        });
        
        e.target.classList.add("activer");
        
        var caphandle = e.target.getAttribute("data-handle");
        var captitle = e.target.getAttribute("data-title");
        var capid = e.target.getAttribute("data-id");
        var capimage = e.target.getAttribute("data-image");
        var capurl = e.target.getAttribute("data-url");
        var capxlid = e.target.getAttribute("data-xl+");
        var capxlavail = e.target.getAttribute("data-xl+-avail");
        var capstandardid = e.target.getAttribute("data-standard");
        var capstandardavail = e.target.getAttribute("data-standard-avail");
        var capsprice = e.target.getAttribute("data-price");
        var capscompare = e.target.getAttribute("data-compare");

        var inputs = e.target.querySelectorAll("input");
        var righthere = document.querySelector(".righthere");
        
        if (righthere) {
          inputs.forEach(function(input, i) {
            var socname = input.getAttribute("name");
            var socavail = input.getAttribute("data-socavail");
            var socvarid = input.getAttribute("data-socvarid");
            var xsocqty = input.getAttribute("data-socqty");
            var socvarprice = input.getAttribute("data-socprice");

            if (i === 0) {
              righthere.innerHTML = "";
              if (socavail == 'true') {
                righthere.innerHTML += "<span class='btn-primer " + socname + " atv' data-socvarprice='" + socvarprice + "' data-socvarid='" + socvarid + "' data-socname='" + socname + "' data-socqty='" + xsocqty + "' data-socavail='" + socavail + "'>" + socname + "</span>";
              } else {
                righthere.innerHTML += "<span class='btn-primer " + socname + " butttonsoldout'  data-socvarprice='" + socvarprice + "' data-socvarid='" + socvarid + "' data-socavail='" + socavail + "' data-socname='" + socname + "' data-socqty='" + xsocqty + "' >" + socname + "</span>";
              }
            } else {
              if (socavail == 'true') {
                righthere.innerHTML += "<span class='btn-primer " + socname + "'  data-socvarprice='" + socvarprice + "' data-socvarid='" + socvarid + "' data-socavail='" + socavail + "' data-socname='" + socname + "' data-socqty='" + xsocqty + "' >" + socname + "</span>";
              } else {
                righthere.innerHTML += "<span class='btn-primer  " + socname + " butttonsoldout'  data-socvarprice='" + socvarprice + "' data-socvarid='" + socvarid + "' data-socavail='" + socavail + "' data-socname='" + socname + "' data-socqty='" + xsocqty + "' >" + socname + "</span>";
              }
            }
          });
        }

        var productPrices = document.querySelector(".product-single__prices");
        if (productPrices) {
          if (typeof capscompare === 'undefined' || capscompare == '$0.00' || capscompare == '') {
            productPrices.innerHTML = '<span data-price="" class="9 normalPrice product__price" data-product-price="">' + capsprice + '</span>';
          } else {
            productPrices.innerHTML = '<span class=" normal_price" data-price-wrapper=""><span class="1 product__price product__price--compare" data-product-price-compare="">' + capscompare + '</span></span>    <span data-price="" class="2 normalPrice product__price sale-price" data-product-price="">' + capsprice + '<span style="margin-bottom:12px;color:black; font-size: medium;display:inline-block"></span></span>';
          }
        }

        var capstandardidInput = document.querySelector(".capstandardid");
        var capxlidInput = document.querySelector(".capxlid");
        var productTitle = document.querySelector(".product-single__title");
        
        if (capstandardidInput) {
          capstandardidInput.value = capstandardid;
        }
        if (capxlidInput) {
          capxlidInput.value = capxlid;
        }
        if (productTitle) {
          productTitle.innerHTML = captitle;
        }

        var atvElement = document.querySelector(".atv");
        if (atvElement) {
          var varavail = atvElement.getAttribute("data-socavail");
          var varquan = parseInt(atvElement.getAttribute("data-socqty"));

          var preorderText = document.querySelector(".preorder-text");
          var preorderDate = document.querySelector(".preorderdate");
          var capsbundleatc = document.querySelector(".capsbundleatc");

          if ((varavail == "true") && (varquan <= 0)) {
            if (preorderText) {
              preorderText.style.display = "block";
            }
            if (preorderDate) {
              preorderDate.innerHTML = "November 30";
            }
            if (capsbundleatc) {
              capsbundleatc.innerHTML = "PRE-ORDER";
            }
          } else {
            if (preorderText) {
              preorderText.style.display = "none";
            }
            if (capsbundleatc) {
              if (capsbundleatc.classList.contains("butttonsoldout")) {
                capsbundleatc.innerHTML = "SOLD OUT";
                capsbundleatc.classList.add("soldoutx");
              } else {
                capsbundleatc.innerHTML = "ADD TO CART";
                capsbundleatc.classList.remove("soldoutx");
              }
            }
          }
        }

        function disableJavaScript(html) {
          return html.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '');
        }

        if (typeof jQuery !== 'undefined') {
          jQuery.ajax({
            type: "GET",
            url: capurl,
            datatype: "HTML",
            beforeSend: function() {},
            complete: function() {
              setTimeout(function() {
                var productPhotos = document.querySelector(".product__photos");
                if (productPhotos) {
                  productPhotos.style.opacity = "1";
                }
              }, 1);
            },
            success: function(t) {
              t = disableJavaScript(t);
              var tempDiv = document.createElement('div');
              tempDiv.innerHTML = t;
              
              var onewayPhotos = tempDiv.querySelector(".oneway.product__photos");
              var collapsibleContent = tempDiv.querySelector(".collapsible-content:first-of-type .collapsible-content__inner");
              
              var currentOnewayPhotos = document.querySelector(".oneway.product__photos");
              var currentCollapsibleContent = document.querySelector(".collapsible-content:first-of-type .collapsible-content__inner");
              
              if (currentOnewayPhotos && onewayPhotos) {
                currentOnewayPhotos.innerHTML = onewayPhotos.innerHTML;
              }
              if (currentCollapsibleContent && collapsibleContent) {
                currentCollapsibleContent.innerHTML = collapsibleContent.innerHTML;
              }

              {% if template.suffix == 'os2printedtopsbundle' or template.suffix == 'sl-36C42638' %}
                jQuery(".oneway .product__thumbs").slick({ slidesToShow: 6, slidesToScroll: 1, arrows: false, fade: false, vertical: true });
                if (window.innerWidth <= 768) {
                  jQuery(".oneway .Main--ProductPhotos").slick({
                    asNavFor: '',
                    arrows: true,
                    dots: false,
                    initialSlide: 0,
                    centerMode: false,
                    centerPadding: '0px',
                    slidesToScroll: 2,
                    slidesToShow: 2,
                    infinite: true
                  });
                }
              {% else %}
                jQuery(".oneway .product__thumbs").slick({ slidesToShow: 6, slidesToScroll: 1, arrows: false, fade: false, vertical: true });
                if (window.innerWidth <= 768) {
                  jQuery(".oneway .Main--ProductPhotos").slick({ 
                    slidesToShow: 1, 
                    centerMode: true, 
                    slidesToScroll: 1, 
                    arrows: false, 
                    centerPadding: '70px', 
                    dots: true 
                  });
                }
              {% endif %}

              var productPhotos = document.querySelector(".product__photos");
              if (productPhotos) {
                productPhotos.style.opacity = "1";
              }
            }
          });
        }
      }
    });
  });
{% endif %}

{% if product.type == 'Headbands' %}
  var variantStock = {};

  {% assign wide_collection = collections['headbands'] %}
  {% for product in wide_collection.products %}
    {% for variant in product.variants %}
      variantStock[{{ variant.id }}] = {{ variant.inventory_quantity }};
      variantAvail[{{ variant.id }}] = {{ variant.available }};
    {% endfor %}
  {% endfor %}

  var productsData = {};
  {% assign wideCollection = collections['headbands'] %}
  {% paginate wideCollection.products by 1000 %}
    {% for product in wideCollection.products %}
      productsData["{{ product.handle }}"] = {
        id: "{{ product.id }}",
        variants: [
          {% for variant in product.variants %}
            {
              id: "{{ variant.id }}",
              option1: "{{ variant.option1 }}",
              option2: "{{ variant.option2 }}",
              inventory_quantity: {{ variant.inventory_quantity }},
              available: {{ variant.available | json }}
            }{% unless forloop.last %},{% endunless %}
          {% endfor %}
        ]
      };
    {% endfor %}
  {% endpaginate %}

  document.addEventListener("DOMContentLoaded", function() {
    var activerInput = document.querySelector(".activer input");
    var capqty, capavl;
    
    if (activerInput) {
      capqty = activerInput.getAttribute("data-socvarid");
      capavl = activerInput.getAttribute("data-socqty");
      capqty = parseFloat(activerInput.getAttribute("data-socqty"));
    }

    var preorderText = document.querySelector(".preorder-text");
    var capsbundleatc = document.querySelector(".capsbundleatc");

    if (capavl == "false") {
      if (preorderText) {
        preorderText.style.display = "none";
      }
      if (capsbundleatc) {
        capsbundleatc.innerHTML = "SOLD OUT";
      }
    } else {
      if (capqty <= 0) {
        if (capsbundleatc) {
          capsbundleatc.innerHTML = "PRE-ORDER";
        }
        if (preorderText) {
          preorderText.style.display = "block";
        }
      } else {
        if (preorderText) {
          preorderText.style.display = "none";
        }
        if (capsbundleatc) {
          capsbundleatc.innerHTML = "ADD TO CART";
        }
      }
    }

    document.addEventListener("click", function(e) {
      if (e.target.classList.contains("btn-primer")) {
        var btnPrimers = document.querySelectorAll(".btn-primer");
        btnPrimers.forEach(function(btn) {
          btn.classList.remove("atv");
        });
        
        e.target.classList.add("atv");
        
        var activerElement = document.querySelector(".activer");
        var capid = activerElement ? activerElement.getAttribute("data-id") : null;
        var capqty = e.target.getAttribute("data-socvarid");
        var capavl = e.target.getAttribute("data-socavail");
        
        capqty = parseFloat(e.target.getAttribute("data-socqty"));

        var preorderText = document.querySelector(".preorder-text");
        var capsbundleatc = document.querySelector(".capsbundleatc");

        if (capavl == "false") {
          if (preorderText) {
            preorderText.style.display = "none";
          }
          if (capsbundleatc) {
            capsbundleatc.innerHTML = "SOLD OUT";
          }
        } else {
          if (capqty <= 0) {
            if (capsbundleatc) {
              capsbundleatc.innerHTML = "PRE-ORDER";
            }
            if (preorderText) {
              preorderText.style.display = "block";
            }
          } else {
            if (preorderText) {
              preorderText.style.display = "none";
            }
            if (capsbundleatc) {
              capsbundleatc.innerHTML = "ADD TO CART";
            }
          }
        }
      }
    });

    var interval = setInterval(function() {
      var imageOverlay = document.querySelector(".scrubs-products .image-overlay[data-handle='{{ product.handle }}']");
      if (imageOverlay) {
        imageOverlay.click();
        clearInterval(interval);
      } else {
        var capsbundleatc = document.querySelector(".capsbundleatc");
        var btnPrimers = document.querySelectorAll(".btn-primer");
        
        if (capsbundleatc) {
          capsbundleatc.innerHTML = "SOLD OUT";
          capsbundleatc.classList.add("soldoutx");
        }
        
        btnPrimers.forEach(function(btn) {
          btn.style.display = "none";
        });
        
        clearInterval(interval);
      }
    }, 1000);

    var capsbundleatc = document.querySelector(".capsbundleatc");
    if (capsbundleatc) {
      capsbundleatc.addEventListener("click", function() {
        this.innerHTML = "Preparing..";
        
        var activerInput = document.querySelector(".image-overlay.activer input");
        var socvarid, socavail;
        
        if (activerInput) {
          socvarid = activerInput.getAttribute("data-socvarid");
          socavail = activerInput.getAttribute("data-socavail");
        }

        if (socavail && typeof jQuery !== 'undefined') {
          var dataxc = {
            "id": socvarid,
            "quantity": 1
          };

          jQuery.ajax({
            type: 'POST',
            url: '/cart/add.js',
            data: dataxc,
            dataType: 'json',
            success: function() {
              capsbundleatc.innerHTML = "ADDED TO BAG";
              if (typeof cart_open === 'function') {
                cart_open();
              }
            }
          });
        } else {
          alert("not avail");
        }
      });
    }

    function addToCart(productsJson) {
      if (typeof jQuery !== 'undefined') {
        jQuery.ajax({
          type: 'POST',
          url: '/cart/add.js',
          data: {
            items: products
          },
          dataType: 'json',
          success: function() {
            alert("Products added to the cart.");
            if (typeof cart_open === 'function') {
              cart_open();
            }
          },
          error: function(jqXHR, textStatus, errorThrown) {
            if (typeof cart_open === 'function') {
              cart_open();
            }
          }
        });
      }
    }
  });
{% endif %}

{% if product.type == 'Performance Compression Socks' %}
  var variantStock = {};

  {% assign wide_collection = collections['performance-compression-socks'] %}
  {% for product in wide_collection.products %}
    {% for variant in product.variants %}
      variantStock[{{ variant.id }}] = {{ variant.inventory_quantity }};
      variantAvail[{{ variant.id }}] = {{ variant.available }};
    {% endfor %}
  {% endfor %}

  var productsData = {};
  {% assign wideCollection = collections['performance-compression-socks'] %}
  {% paginate wideCollection.products by 1000 %}
    {% for product in wideCollection.products %}
      productsData["{{ product.handle }}"] = {
        id: "{{ product.id }}",
        variants: [
          {% for variant in product.variants %}
            {
              id: "{{ variant.id }}",
              option1: "{{ variant.option1 }}",
              option2: "{{ variant.option2 }}",
              inventory_quantity: {{ variant.inventory_quantity }},
              available: {{ variant.available | json }}
            }{% unless forloop.last %},{% endunless %}
          {% endfor %}
        ]
      };
    {% endfor %}
  {% endpaginate %}

  {% assign wideCollection = collections['performance-compression-socks'] %}
  {% for product in wideCollection.products %}
    productsData["{{ product.handle }}"] = {
      id: "{{ product.id }}",
      variants: [
        {% for variant in product.variants %}
          {
            id: "{{ variant.id }}",
            option1: "{{ variant.option1 }}",
            option2: "{{ variant.option2 }}",
            inventory_quantity: {{ variant.inventory_quantity }},
            available: {{ variant.available | json }}
          }{% unless forloop.last %},{% endunless %}
        {% endfor %}
      ]
    };
  {% endfor %}

  document.addEventListener("DOMContentLoaded", function() {
    document.addEventListener("click", function(e) {
      if (e.target.classList.contains("btn-primer")) {
        var btnPrimers = document.querySelectorAll(".btn-primer");
        btnPrimers.forEach(function(btn) {
          btn.classList.remove("atv");
        });
        
        e.target.classList.add("atv");
        
        var activerElement = document.querySelector(".activer");
        var capid = activerElement ? activerElement.getAttribute("data-id") : null;
        var capqty = e.target.getAttribute("data-socvarid");
        var capavl = e.target.getAttribute("data-socavail");
        
        capqty = parseFloat(e.target.getAttribute("data-socqty"));

        var preorderText = document.querySelector(".preorder-text");
        var capsbundleatc = document.querySelector(".capsbundleatc");

        if (capavl == "false") {
          if (preorderText) {
            preorderText.style.display = "none";
          }
          if (capsbundleatc) {
            capsbundleatc.innerHTML = "SOLD OUT";
          }
        } else {
          if (capqty <= 0) {
            if (capsbundleatc) {
              capsbundleatc.innerHTML = "PRE-ORDER";
            }
            if (preorderText) {
              preorderText.style.display = "block";
            }
          } else {
            if (preorderText) {
              preorderText.style.display = "none";
            }
            if (capsbundleatc) {
              capsbundleatc.innerHTML = "ADD TO CART";
            }
          }
        }
      }
    });

    var interval = setInterval(function() {
      var imageOverlay = document.querySelector(".scrubs-products .image-overlay[data-handle='{{ product.handle }}']");
      if (imageOverlay) {
        imageOverlay.click();
        clearInterval(interval);
      } else {
        var capsbundleatc = document.querySelector(".capsbundleatc");
        var btnPrimers = document.querySelectorAll(".btn-primer");
        
        if (capsbundleatc) {
          capsbundleatc.innerHTML = "SOLD OUT";
          capsbundleatc.classList.add("soldoutx");
        }
        
        btnPrimers.forEach(function(btn) {
          btn.style.display = "none";
        });
        
        clearInterval(interval);
      }
    }, 1000);

    document.addEventListener("click", function(e) {
      if (e.target.classList.contains("image-overlay")) {
        var imageOverlays = document.querySelectorAll(".image-overlay");
        imageOverlays.forEach(function(overlay) {
          overlay.classList.remove("activer");
        });
        
        e.target.classList.add("activer");
      }
    });

    var capsbundleatc = document.querySelector(".capsbundleatc");
    if (capsbundleatc) {
      capsbundleatc.addEventListener("click", function() {
        this.innerHTML = "Preparing..";
        
        var atvElement = document.querySelector(".atv");
        var socvarid, socavail;
        
        if (atvElement) {
          socvarid = atvElement.getAttribute("data-socvarid");
          socavail = atvElement.getAttribute("data-socavail");
        }

        if (socavail && typeof jQuery !== 'undefined') {
          var dataxc = {
            "id": socvarid,
            "quantity": 1
          };

          jQuery.ajax({
            type: 'POST',
            url: '/cart/add.js',
            data: dataxc,
            dataType: 'json',
            success: function() {
              capsbundleatc.innerHTML = "ADDED TO BAG";
              if (typeof cart_open === 'function') {
                cart_open();
              }
            }
          });
        } else {
          alert("not avail");
        }
      });
    }

    function addToCart(productsJson) {
      if (typeof jQuery !== 'undefined') {
        jQuery.ajax({
          type: 'POST',
          url: '/cart/add.js',
          data: {
            items: products
          },
          dataType: 'json',
          success: function() {
            alert("Products added to the cart.");
            if (typeof cart_open === 'function') {
              cart_open();
            }
          },
          error: function(jqXHR, textStatus, errorThrown) {
            if (typeof cart_open === 'function') {
              cart_open();
            }
          }
        });
      }
    }
  });
{% endif %}

{% if product.type == 'Compression Socks' %}
  var variantStock = {};

  {% assign wide_collection = collections['new-wide-socks'] %}
  {% for product in wide_collection.products %}
    {% for variant in product.variants %}
      variantStock[{{ variant.id }}] = {{ variant.inventory_quantity }};
      variantAvail[{{ variant.id }}] = {{ variant.available }};
    {% endfor %}
  {% endfor %}

  {% assign wide_collection = collections['non-bamboo-sock'] %}
  {% for product in wide_collection.products %}
    {% for variant in product.variants %}
      variantStock[{{ variant.id }}] = {{ variant.inventory_quantity }};
      variantAvail[{{ variant.id }}] = {{ variant.available }};
    {% endfor %}
  {% endfor %}

  var productsData = {};
  {% assign wideCollection = collections['new-wide-socks'] %}
  {% paginate wideCollection.products by 1000 %}
    {% for product in wideCollection.products %}
      productsData["{{ product.handle }}"] = {
        id: "{{ product.id }}",
        variants: [
          {% for variant in product.variants %}
            {
              id: "{{ variant.id }}",
              option1: "{{ variant.option1 }}",
              option2: "{{ variant.option2 }}",
              inventory_quantity: {{ variant.inventory_quantity }},
              available: {{ variant.available | json }}
            }{% unless forloop.last %},{% endunless %}
          {% endfor %}
        ]
      };
    {% endfor %}
  {% endpaginate %}

  {% assign wideCollection = collections['non-bamboo-sock'] %}
  {% for product in wideCollection.products %}
    productsData["{{ product.handle }}"] = {
      id: "{{ product.id }}",
      variants: [
        {% for variant in product.variants %}
          {
            id: "{{ variant.id }}",
            option1: "{{ variant.option1 }}",
            option2: "{{ variant.option2 }}",
            inventory_quantity: {{ variant.inventory_quantity }},
            available: {{ variant.available | json }}
          }{% unless forloop.last %},{% endunless %}
        {% endfor %}
      ]
    };
  {% endfor %}

  document.addEventListener("DOMContentLoaded", function() {
    document.addEventListener("click", function(e) {
      if (e.target.classList.contains("btn-primer")) {
        var btnPrimers = document.querySelectorAll(".btn-primer");
        btnPrimers.forEach(function(btn) {
          btn.classList.remove("atv");
        });
        
        e.target.classList.add("atv");
        
        var activerElement = document.querySelector(".activer");
        var capid = activerElement ? activerElement.getAttribute("data-id") : null;
        var capqty = e.target.getAttribute("data-socvarid");
        var capavl = e.target.getAttribute("data-socavail");
        
        capqty = parseFloat(e.target.getAttribute("data-socqty"));

        var preorderText = document.querySelector(".preorder-text");
        var capsbundleatc = document.querySelector(".capsbundleatc");

        if (capavl == "false") {
          if (preorderText) {
            preorderText.style.display = "none";
          }
          if (capsbundleatc) {
            capsbundleatc.innerHTML = "SOLD OUT";
          }
        } else {
          if (capqty <= 0) {
            if (capsbundleatc) {
              capsbundleatc.innerHTML = "PRE-ORDER";
            }
            if (preorderText) {
              preorderText.style.display = "block";
            }
          } else {
            if (preorderText) {
              preorderText.style.display = "none";
            }
            if (capsbundleatc) {
              capsbundleatc.innerHTML = "ADD TO CART";
            }
          }
        }
      }
    });

    var interval = setInterval(function() {
      var imageOverlay = document.querySelector(".scrubs-products .image-overlay[data-handle='{{ product.handle }}']");
      if (imageOverlay) {
        imageOverlay.click();
        clearInterval(interval);
      } else {
        var capsbundleatc = document.querySelector(".capsbundleatc");
        var btnPrimers = document.querySelectorAll(".btn-primer");
        
        if (capsbundleatc) {
          capsbundleatc.innerHTML = "SOLD OUT";
          capsbundleatc.classList.add("soldoutx");
        }
        
        btnPrimers.forEach(function(btn) {
          btn.style.display = "none";
        });
        
        clearInterval(interval);
      }
    }, 1000);

    document.addEventListener("click", function(e) {
      if (e.target.classList.contains("image-overlay")) {
        var imageOverlays = document.querySelectorAll(".image-overlay");
        imageOverlays.forEach(function(overlay) {
          overlay.classList.remove("activer");
        });
        
        e.target.classList.add("activer");
      }
    });

    var capsbundleatc = document.querySelector(".capsbundleatc");
    if (capsbundleatc) {
      capsbundleatc.addEventListener("click", function() {
        this.innerHTML = "Preparing..";
        
        var atvElement = document.querySelector(".atv");
        var socvarid, socavail;
        
        if (atvElement) {
          socvarid = atvElement.getAttribute("data-socvarid");
          socavail = atvElement.getAttribute("data-socavail");
        }

        if (socavail && typeof jQuery !== 'undefined') {
          var dataxc = {
            "id": socvarid,
            "quantity": 1
          };

          jQuery.ajax({
            type: 'POST',
            url: '/cart/add.js',
            data: dataxc,
            dataType: 'json',
            success: function() {
              capsbundleatc.innerHTML = "ADDED TO BAG";
              if (typeof cart_open === 'function') {
                cart_open();
              }
            }
          });
        } else {
          alert("not avail");
        }
      });
    }

    function addToCart(productsJson) {
      if (typeof jQuery !== 'undefined') {
        jQuery.ajax({
          type: 'POST',
          url: '/cart/add.js',
          data: {
            items: products
          },
          dataType: 'json',
          success: function() {
            alert("Products added to the cart.");
            if (typeof cart_open === 'function') {
              cart_open();
            }
          },
          error: function(jqXHR, textStatus, errorThrown) {
            if (typeof cart_open === 'function') {
              cart_open();
            }
          }
        });
      }
    }
  });
{% endif %}

{% if product.type == 'Christmas' %}
  document.addEventListener("DOMContentLoaded", function() {
    document.addEventListener("click", function(e) {
      if (e.target.classList.contains("btn-primer")) {
        var activerElement = document.querySelector(".activer");
        var capid = activerElement ? activerElement.getAttribute("data-id") : null;
        
        var btnPrimers = document.querySelectorAll(".btn-primer");
        btnPrimers.forEach(function(btn) {
          btn.classList.remove("atv");
        });
        
        e.target.classList.add("atv");
        
        var capqty = e.target.getAttribute("data-socqty");
        var capavail = e.target.getAttribute("data-socavail");
        
        capqty = parseFloat(e.target.getAttribute("data-socqty"));
        
        var preorderText = document.querySelector(".preorder-text");
        var capsbundleatc = document.querySelector(".capsbundleatc");

        switch (capid) {
          case "8296907473154":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
                preorderText.innerHTML = "November 30";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          case "8405155021058":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
                preorderText.innerHTML = "November 30";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          case "8687498756354":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          case "8687500263682":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.innerHTML = "November 30";
                preorderText.style.display = "block";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          case "8687501050114":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          case "8687501902082":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          case "8687502622978":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
              var preorderDate = document.querySelector(".preorderdate");
              if (preorderDate) {
                preorderDate.innerHTML = "November 30";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          case "8687503212802":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          case "8687504294146":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          default:
            if (e.target.classList.contains("butttonsoldout")) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "SOLD OUT";
                capsbundleatc.classList.add("soldoutx");
              }
            } else {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "ADD TO CART";
                capsbundleatc.classList.remove("soldoutx");
              }
            }
        }

        var alttag = e.target.innerHTML;
        var thumbImg = document.querySelector(".product__thumb-item img[alt='" + alttag + "']");
        if (thumbImg && typeof jQuery !== 'undefined') {
          jQuery(thumbImg).trigger("click");
        }
        
        var allImgs = document.querySelectorAll("img[alt='" + alttag + "']");
        allImgs.forEach(function(img) {
          var productSlide = img.closest(".product__slide");
          if (productSlide) {
            var index = productSlide.getAttribute('data-index');
            var mainProductPhotos = document.querySelector(".Main--ProductPhotos");
            if (mainProductPhotos && typeof jQuery !== 'undefined' && jQuery.fn.slick) {
              jQuery(mainProductPhotos).slick('slickGoTo', index);
            }
          }
        });
      }
    });

    var interval = setInterval(function() {
      var imageOverlay = document.querySelector(".scrubs-products .image-overlay[data-handle='{{ product.handle }}']");
      if (imageOverlay) {
        imageOverlay.click();
        var firstBtnPrimer = document.querySelector(".btn-primer:first-child");
        if (firstBtnPrimer) {
          firstBtnPrimer.click();
        }
        clearInterval(interval);
      } else {
        var capsbundleatc = document.querySelector(".capsbundleatc");
        var btnPrimers = document.querySelectorAll(".btn-primer");
        
        if (capsbundleatc) {
          capsbundleatc.innerHTML = "SOLD OUT";
          capsbundleatc.classList.add("soldoutx");
        }
        
        btnPrimers.forEach(function(btn) {
          btn.style.display = "none";
        });
        
        clearInterval(interval);
      }
    }, 1000);

    var capsbundleatc = document.querySelector(".capsbundleatc");
    if (capsbundleatc) {
      capsbundleatc.addEventListener("click", function() {
        this.innerHTML = "Preparing..";

        var atvElement = document.querySelector(".atv");
        if (atvElement) {
          var socvarid = atvElement.getAttribute("data-socvarid");
          var socavail = atvElement.getAttribute("data-socavail");

          if (socavail && typeof jQuery !== 'undefined') {
            var dataxc = {
              "id": socvarid,
              "quantity": 1
            };

            jQuery.ajax({
              type: 'POST',
              url: '/cart/add.js',
              data: dataxc,
              dataType: 'json',
              success: function() {
                capsbundleatc.innerHTML = "ADD TO CART";
                if (typeof cart_open === 'function') {
                  cart_open();
                }
              }
            });
          }
        }
      });
    }

    function addToCart(productsJson) {
      if (typeof jQuery !== 'undefined') {
        jQuery.ajax({
          type: 'POST',
          url: '/cart/add.js',
          data: {
            items: products
          },
          dataType: 'json',
          success: function() {
            alert("Products added to the cart.");
            if (typeof cart_open === 'function') {
              cart_open();
            }
          },
          error: function(jqXHR, textStatus, errorThrown) {
            if (typeof cart_open === 'function') {
              cart_open();
            }
          }
        });
      }
    }

    document.addEventListener("click", function(e) {
      if (e.target.classList.contains("image-overlay")) {
        var preorderText = document.querySelector(".preorder-text");
        var capsbundleatc = document.querySelector(".capsbundleatc");
        var btnPrimers = document.querySelectorAll(".btn-primer");
        
        if (preorderText) {
          preorderText.style.display = "none";
        }
        if (capsbundleatc) {
          capsbundleatc.innerHTML = "ADD TO BAG";
          capsbundleatc.classList.remove("soldoutx");
        }
        
        btnPrimers.forEach(function(btn) {
          btn.style.display = "block";
        });

        var imageOverlays = document.querySelectorAll(".image-overlay");
        imageOverlays.forEach(function(overlay) {
          overlay.classList.remove("activer");
        });
        
        e.target.classList.add("activer");
        
        var caphandle = e.target.getAttribute("data-handle");
        var captitle = e.target.getAttribute("data-title");
        var capid = e.target.getAttribute("data-id");
        var capimage = e.target.getAttribute("data-image");
        var capurl = e.target.getAttribute("data-url");
        var capxlid = e.target.getAttribute("data-xl+");
        var capxlavail = e.target.getAttribute("data-xl+-avail");
        var capstandardid = e.target.getAttribute("data-standard");
        var capstandardavail = e.target.getAttribute("data-standard-avail");
        var capsprice = e.target.getAttribute("data-price");
        var capscompare = e.target.getAttribute("data-compare");

        var inputs = e.target.querySelectorAll("input");
        var righthere = document.querySelector(".righthere");
        
        if (righthere) {
          inputs.forEach(function(input, i) {
            var socname = input.getAttribute("name");
            var socavail = input.getAttribute("data-socavail");
            var socvarid = input.getAttribute("data-socvarid");
            var xsocqty = input.getAttribute("data-socqty");

            if (i === 0) {
              righthere.innerHTML = "";
              if (socavail == 'true') {
                righthere.innerHTML += "<span class='btn-primer " + socname + " atv' data-socvarid='" + socvarid + "' data-socname='" + socname + "' data-socqty='" + xsocqty + "' data-socavail='" + socavail + "'>" + socname + "</span>";
              } else {
                righthere.innerHTML += "<span class='btn-primer " + socname + " butttonsoldout' data-socvarid='" + socvarid + "' data-socavail='" + socavail + "' data-socname='" + socname + "' data-socqty='" + xsocqty + "' >" + socname + "</span>";
              }
            } else {
              if (socavail == 'true') {
                righthere.innerHTML += "<span class='btn-primer " + socname + "' data-socvarid='" + socvarid + "' data-socavail='" + socavail + "' data-socname='" + socname + "' data-socqty='" + xsocqty + "' >" + socname + "</span>";
              } else {
                righthere.innerHTML += "<span class='btn-primer  " + socname + " butttonsoldout' data-socvarid='" + socvarid + "' data-socavail='" + socavail + "' data-socname='" + socname + "' data-socqty='" + xsocqty + "' >" + socname + "</span>";
              }
            }
          });
        }

        var productPrices = document.querySelector(".product-single__prices");
        if (productPrices) {
          if (typeof capscompare === 'undefined' || capscompare == '$0.00' || capscompare == '') {
            productPrices.innerHTML = '<span data-price="" class="9 normalPrice product__price" data-product-price="">' + capsprice + '</span>';
          } else {
            productPrices.innerHTML = '<span class=" normal_price" data-price-wrapper=""><span class="1 product__price product__price--compare" data-product-price-compare="">' + capscompare + '</span></span>    <span data-price="" class="2 normalPrice product__price sale-price" data-product-price="">' + capsprice + '<span style="margin-bottom:12px;color:black; font-size: medium;display:inline-block"></span></span>';
          }
        }

        var capstandardidInput = document.querySelector(".capstandardid");
        var capxlidInput = document.querySelector(".capxlid");
        var productTitle = document.querySelector(".product-single__title");
        
        if (capstandardidInput) {
          capstandardidInput.value = capstandardid;
        }
        if (capxlidInput) {
          capxlidInput.value = capxlid;
        }
        if (productTitle) {
          productTitle.innerHTML = captitle;
        }

        function disableJavaScript(html) {
          return html.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '');
        }

        if (typeof jQuery !== 'undefined') {
          jQuery.ajax({
            type: "GET",
            url: capurl,
            datatype: "HTML",
            beforeSend: function() {},
            complete: function() {
              setTimeout(function() {
                var productPhotos = document.querySelector(".product__photos");
                if (productPhotos) {
                  productPhotos.style.opacity = "1";
                }
              }, 1);
            },
            success: function(t) {
              t = disableJavaScript(t);
              var tempDiv = document.createElement('div');
              tempDiv.innerHTML = t;
              
              var onewayPhotos = tempDiv.querySelector(".oneway.product__photos");
              var collapsibleContent = tempDiv.querySelector(".collapsible-content:first-of-type .collapsible-content__inner");
              
              var currentOnewayPhotos = document.querySelector(".oneway.product__photos");
              var currentCollapsibleContent = document.querySelector(".collapsible-content:first-of-type .collapsible-content__inner");
              
              if (currentOnewayPhotos && onewayPhotos) {
                currentOnewayPhotos.innerHTML = onewayPhotos.innerHTML;
              }
              if (currentCollapsibleContent && collapsibleContent) {
                currentCollapsibleContent.innerHTML = collapsibleContent.innerHTML;
              }

              jQuery(".oneway .product__thumbs").slick({
                slidesToShow: 6,
                slidesToScroll: 1,
                arrows: false,
                fade: false,
                vertical: true
              });

              if (window.innerWidth <= 768) {
                jQuery(".oneway .Main--ProductPhotos").slick({
                  slidesToShow: 1,
                  centerMode: true,
                  slidesToScroll: 1,
                  arrows: false,
                  centerPadding: '70px',
                  dots: true
                });
              }

              var productPhotos = document.querySelector(".product__photos");
              if (productPhotos) {
                productPhotos.style.opacity = "1";
              }
            }
          });
        }

        var firstBtnPrimer = document.querySelector(".btn-primer:first-child");
        if (firstBtnPrimer) {
          firstBtnPrimer.click();
        }
      }
    });
  });
{% endif %}

{% if product.type == 'Headbands' %}
  document.addEventListener("DOMContentLoaded", function() {
    var preorderDate = document.querySelector(".preorderdate");
    if (preorderDate) {
      preorderDate.innerHTML = "July 21";
    }
  });
{% endif %}

{% if product.type == 'Printed Pattern Scrub Pants' or product.type == 'Men Printed Pattern Scrub Pants' %}
  function updateInseamAvailability(selectedSize) {
    var btnInseams = document.querySelectorAll(".btn-inseam");
    btnInseams.forEach(function(btn) {
      btn.classList.remove("butttonsoldout");
    });

    btnInseams.forEach(function(btn) {
      var inseam = btn.getAttribute("data-inseam");
      var variant = findVariant(selectedSize, inseam);

      if (!variant || !variant.available || variant.inventory_quantity <= 0) {
        btn.classList.add("butttonsoldout");
      }
    });
  }

  function updateSizeAvailability(selectedInseam) {
    var btnSizes = document.querySelectorAll(".btn-size");
    btnSizes.forEach(function(btn) {
      btn.classList.remove("butttonsoldout");
    });

    btnSizes.forEach(function(btn) {
      var size = btn.getAttribute("data-size");
      var variant = findVariant(size, selectedInseam);

      if (!variant || !variant.available || variant.inventory_quantity <= 0) {
        btn.classList.add("butttonsoldout");
      }
    });
  }

  document.addEventListener("DOMContentLoaded", function() {
    document.addEventListener("click", function(e) {
      if (e.target.classList.contains("btn-size")) {
        var dron = e.target.getAttribute("data-size");
        var sizeDesc = document.querySelector(".size-desc");

        if (sizeDesc) {
          switch (dron) {
            case "XXS":
              sizeDesc.innerHTML = "XXS";
              break;
            case "XS":
              sizeDesc.innerHTML = "XS";
              break;
            case "S":
              sizeDesc.innerHTML = "S";
              break;
            case "M":
              sizeDesc.innerHTML = "M";
              break;
            case "L":
              sizeDesc.innerHTML = "L";
              break;
            case "XL":
              sizeDesc.innerHTML = "XL";
              break;
            case "XXL":
              sizeDesc.innerHTML = "XXL";
              break;
            default:
              sizeDesc.innerHTML = "Small";
          }
        }
      }
    });

    var interval = setInterval(function() {
      var btnSizes = document.querySelectorAll(".btn-size");
      if (btnSizes.length) {
        var atvElement = document.querySelector(".atv");
        var dron = atvElement ? atvElement.getAttribute("data-size") : null;
        var sizeDesc = document.querySelector(".size-desc");

        if (sizeDesc && dron) {
          switch (dron) {
            case "XXS":
              sizeDesc.innerHTML = "XXS";
              break;
            case "XS":
              sizeDesc.innerHTML = "XS";
              break;
            case "S":
              sizeDesc.innerHTML = "S";
              break;
            case "M":
              sizeDesc.innerHTML = "M";
              break;
            case "L":
              sizeDesc.innerHTML = "L";
              break;
            case "XL":
              sizeDesc.innerHTML = "XL";
              break;
            case "XXL":
              sizeDesc.innerHTML = "XXL";
              break;
            default:
              sizeDesc.innerHTML = "Small";
          }
        }
        clearInterval(interval);
      }
    }, 1000);

    function findVariant(selectedSize, selectedInseam) {
      var foundVariant = null;
      var activerInputs = document.querySelectorAll(".activer input");
      
      activerInputs.forEach(function(input) {
        var variantName = input.getAttribute("name");
        var parts = variantName.split(' / ');
        if (parts.length === 2) {
          var size = parts[0].trim();
          var inseam = parts[1].trim();
          if (size === selectedSize && inseam === selectedInseam) {
            foundVariant = {
              id: input.getAttribute("data-socvarid"),
              available: input.getAttribute("data-socavail") === 'true',
              inventory_quantity: parseInt(input.getAttribute("data-socqty")),
              price: input.getAttribute("data-socprice")
            };
          }
        }
      });
      return foundVariant;
    }

    function updateProductInfo(variant) {
      var capsbundleatc = document.querySelector(".capsbundleatc");
      var preorderText = document.querySelector(".preorder-text");
      
      if (!variant) {
        if (capsbundleatc) {
          capsbundleatc.removeAttribute("data-variant-id");
          capsbundleatc.innerHTML = "SOLD OUT";
          capsbundleatc.classList.add("soldoutx");
        }
        return;
      }

      var capqty = variant.inventory_quantity || 0;
      var capavail = variant.available;

      if (capsbundleatc) {
        capsbundleatc.setAttribute("data-variant-id", variant.id);
        capsbundleatc.classList.remove("soldoutx");

        if (capqty <= 0 && capavail) {
          capsbundleatc.innerHTML = "PRE-ORDER";
          if (preorderText) {
            preorderText.style.display = "block";
          }
        } else {
          if (capavail) {
            if (preorderText) {
              preorderText.style.display = "none";
            }
            capsbundleatc.innerHTML = "ADD TO CART";
          } else {
            if (preorderText) {
              preorderText.style.display = "none";
            }
            capsbundleatc.innerHTML = "SOLD OUT";
            capsbundleatc.classList.add("soldoutx");
          }
        }
      }
    }

    document.addEventListener("click", function(e) {
      if (e.target.classList.contains("btn-size")) {
        var btnSizes = document.querySelectorAll(".btn-size");
        btnSizes.forEach(function(btn) {
          btn.classList.remove("atv");
        });
        
        e.target.classList.add("atv");

        var selectedSize = e.target.getAttribute("data-size");
        var selectedInseamBtn = document.querySelector(".btn-inseam.atv");
        var selectedInseam = selectedInseamBtn ? selectedInseamBtn.getAttribute("data-inseam") : null;
        var variant = findVariant(selectedSize, selectedInseam);
        
        updateProductInfo(variant);
        
        var sizeDesc = document.querySelector(".size-desc");
        if (sizeDesc) {
          sizeDesc.textContent = selectedSize;
        }
      }
    });

    document.addEventListener("click", function(e) {
      if (e.target.classList.contains("btn-inseam")) {
        var btnInseams = document.querySelectorAll(".btn-inseam");
        btnInseams.forEach(function(btn) {
          btn.classList.remove("atv");
        });
        
        e.target.classList.add("atv");

        var selectedSizeBtn = document.querySelector(".btn-size.atv");
        var selectedSize = selectedSizeBtn ? selectedSizeBtn.getAttribute("data-size") : null;
        var selectedInseam = e.target.getAttribute("data-inseam");

        updateSizeAvailability(selectedInseam);

        if (selectedSize && selectedSizeBtn.classList.contains("butttonsoldout")) {
          var firstAvailableSize = document.querySelector(".btn-size");
          if (firstAvailableSize) {
            var btnSizes = document.querySelectorAll(".btn-size");
            btnSizes.forEach(function(btn) {
              btn.classList.remove("atv");
            });
            
            firstAvailableSize.classList.add("atv");
            var newSelectedSize = firstAvailableSize.getAttribute("data-size");
            var variant = findVariant(newSelectedSize, selectedInseam);
            updateProductInfo(variant);
            
            var sizeDesc = document.querySelector(".size-desc");
            if (sizeDesc) {
              sizeDesc.textContent = newSelectedSize;
            }
          } else {
            var capsbundleatc = document.querySelector(".capsbundleatc");
            if (capsbundleatc) {
              capsbundleatc.removeAttribute("data-variant-id");
              capsbundleatc.innerHTML = "SOLD OUT";
            }
          }
        } else if (selectedSize && selectedInseam) {
          var variant = findVariant(selectedSize, selectedInseam);
          updateProductInfo(variant);
        }
      }
    });

    var interval = setInterval(function() {
      var imageOverlay = document.querySelector(".scrubs-products .image-overlay[data-handle='{{ product.handle }}']");
      if (imageOverlay) {
        imageOverlay.click();
        var firstBtnPrimer = document.querySelector(".btn-primer:first-child");
        if (firstBtnPrimer) {
          firstBtnPrimer.click();
        }
        clearInterval(interval);
      }
    }, 1000);

    var capsbundleatc = document.querySelector(".capsbundleatc");
    if (capsbundleatc) {
      capsbundleatc.addEventListener("click", function() {
        var variantId = this.getAttribute("data-variant-id");
        var selectedSizeBtn = document.querySelector(".btn-size.atv");
        var selectedInseamBtn = document.querySelector(".btn-inseam.atv");
        var selectedSize = selectedSizeBtn ? selectedSizeBtn.getAttribute("data-size") : null;
        var selectedInseam = selectedInseamBtn ? selectedInseamBtn.getAttribute("data-inseam") : null;

        if (!variantId) {
          alert("Please select both size and inseam");
          return;
        }

        if (this.classList.contains("soldoutx")) {
          alert("This variant is currently sold out");
          return;
        }

        this.innerHTML = "Preparing..";

        var dataxc = {
          "id": variantId,
          "quantity": 1
        };

        if (typeof jQuery !== 'undefined') {
          jQuery.ajax({
            type: 'POST',
            url: '/cart/add.js',
            data: dataxc,
            dataType: 'json',
            success: function() {
              capsbundleatc.innerHTML = "ADD TO CART";
              if (typeof cart_open === 'function') {
                cart_open();
              }
            },
            error: function(xhr, status, error) {
              capsbundleatc.innerHTML = "ADD TO CART";
              var errorMsg = "Please try again";
              if (xhr.responseJSON && xhr.responseJSON.description) {
                errorMsg = xhr.responseJSON.description;
              }
              alert("Error adding to cart: " + errorMsg);
            }
          });
        }
      });
    }

    function addToCart(productsJson) {
      if (typeof jQuery !== 'undefined') {
        jQuery.ajax({
          type: 'POST',
          url: '/cart/add.js',
          data: {
            items: products
          },
          dataType: 'json',
          success: function() {
            alert("Products added to the cart.");
            if (typeof cart_open === 'function') {
              cart_open();
            }
          },
          error: function(jqXHR, textStatus, errorThrown) {
            if (typeof cart_open === 'function') {
              cart_open();
            }
          }
        });
      }
    }

    document.addEventListener("click", function(e) {
      if (e.target.classList.contains("image-overlay")) {
        var preorderText = document.querySelector(".preorder-text");
        var capsbundleatc = document.querySelector(".capsbundleatc");
        var btnPrimers = document.querySelectorAll(".btn-primer");
        
        if (preorderText) {
          preorderText.style.display = "none";
        }
        if (capsbundleatc) {
          capsbundleatc.innerHTML = "ADD TO BAG";
          capsbundleatc.classList.remove("soldoutx");
        }
        
        btnPrimers.forEach(function(btn) {
          btn.style.display = "block";
        });

        var imageOverlays = document.querySelectorAll(".image-overlay");
        imageOverlays.forEach(function(overlay) {
          overlay.classList.remove("activer");
        });
        
        e.target.classList.add("activer");

        var caphandle = e.target.getAttribute("data-handle");
        var captitle = e.target.getAttribute("data-title");
        var capid = e.target.getAttribute("data-id");
        var capimage = e.target.getAttribute("data-image");
        var capurl = e.target.getAttribute("data-url");
        var capxlid = e.target.getAttribute("data-xl+");
        var capxlavail = e.target.getAttribute("data-xl+-avail");
        var capstandardid = e.target.getAttribute("data-standard");
        var capstandardavail = e.target.getAttribute("data-standard-avail");
        var capsprice = e.target.getAttribute("data-price");
        var capscompare = e.target.getAttribute("data-compare");

        var sizeButtons = document.querySelector(".size-buttons");
        var inseamButtons = document.querySelector(".inseam-buttons");
        
        if (sizeButtons) {
          sizeButtons.innerHTML = "";
        }
        if (inseamButtons) {
          inseamButtons.innerHTML = "";
        }

        var sizes = new Set();
        var inseams = new Set();

        var inputs = e.target.querySelectorAll("input");
        inputs.forEach(function(input) {
          var socname = input.getAttribute("name");
          var parts = socname.split(' / ');
          if (parts.length === 2) {
            var size = parts[0].trim();
            var inseam = parts[1].trim();
            sizes.add(size);
            inseams.add(inseam);
          }
        });

        var sizeOrder = ['XXS', 'XS', 'S', 'M', 'L', 'XL', 'XXL'];
        sizeOrder.forEach(function(size) {
          if (sizes.has(size)) {
            var isDefault = size === 'S';
            var className = isDefault ? 'atv' : '';
            if (sizeButtons) {
              sizeButtons.innerHTML += "<span class='btn-size " + className + "' data-size='" + size + "'>" + size + "</span>";
            }
          }
        });

        Array.from(inseams).forEach(function(inseam, index) {
          var isDefault = inseam === 'Standard' || index === 0;
          var className = isDefault ? 'atv' : '';
          if (inseamButtons) {
            inseamButtons.innerHTML += "<span class='btn-inseam " + className + "' data-inseam='" + inseam + "'>" + inseam + "</span>";
          }
        });

        setTimeout(function() {
          var defaultSize = 'S';
          var defaultInseam = Array.from(inseams)[0];
          var defaultVariant = findVariant(defaultSize, defaultInseam);
          if (defaultVariant) {
            updateProductInfo(defaultVariant);
          }
        }, 100);

        var productPrices = document.querySelector(".product-single__prices");
        if (productPrices) {
          if (typeof capscompare === 'undefined' || capscompare == '$0.00' || capscompare == '') {
            productPrices.innerHTML = '<span data-price="" class="9 normalPrice product__price" data-product-price="">' + capsprice + '</span>';
          } else {
            productPrices.innerHTML = '<span class=" normal_price" data-price-wrapper=""><span class="1 product__price product__price--compare" data-product-price-compare="">' + capscompare + '</span></span>    <span data-price="" class="2 normalPrice product__price sale-price" data-product-price="">' + capsprice + '<span style="margin-bottom:12px;color:black; font-size: medium;display:inline-block"></span></span>';
          }
        }

        var capstandardidInput = document.querySelector(".capstandardid");
        var capxlidInput = document.querySelector(".capxlid");
        var productTitle = document.querySelector(".product-single__title");
        
        if (capstandardidInput) {
          capstandardidInput.value = capstandardid;
        }
        if (capxlidInput) {
          capxlidInput.value = capxlid;
        }
        if (productTitle) {
          productTitle.innerHTML = captitle;
        }

        function disableJavaScript(html) {
          return html.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '');
        }

        if (typeof jQuery !== 'undefined') {
          jQuery.ajax({
            type: "GET",
            url: capurl,
            datatype: "HTML",
            beforeSend: function() {},
            complete: function() {
              setTimeout(function() {
                var productPhotos = document.querySelector(".product__photos");
                if (productPhotos) {
                  productPhotos.style.opacity = "1";
                }
              }, 1);
            },
            success: function(t) {
              t = disableJavaScript(t);
              var tempDiv = document.createElement('div');
              tempDiv.innerHTML = t;
              
              var onewayPhotos = tempDiv.querySelector(".oneway.product__photos");
              var collapsibleContent = tempDiv.querySelector(".collapsible-content:first-of-type .collapsible-content__inner");
              
              var currentOnewayPhotos = document.querySelector(".oneway.product__photos");
              var currentCollapsibleContent = document.querySelector(".collapsible-content:first-of-type .collapsible-content__inner");
              
              if (currentOnewayPhotos && onewayPhotos) {
                currentOnewayPhotos.innerHTML = onewayPhotos.innerHTML;
              }
              if (currentCollapsibleContent && collapsibleContent) {
                currentCollapsibleContent.innerHTML = collapsibleContent.innerHTML;
              }

              {% if template.suffix == 'os2printedtopsbundle' or template.suffix == 'sl-36C42638' %}
                jQuery(".oneway .product__thumbs").slick({
                  slidesToShow: 6,
                  slidesToScroll: 1,
                  arrows: false,
                  fade: false,
                  vertical: true
                });
                if (window.innerWidth <= 768) {
                  jQuery(".oneway .Main--ProductPhotos").slick({
                    asNavFor: '',
                    arrows: true,
                    dots: false,
                    initialSlide: 0,
                    centerMode: false,
                    centerPadding: '0px',
                    slidesToScroll: 2,
                    slidesToShow: 2,
                    infinite: true
                  });
                }
              {% else %}
                jQuery(".oneway .product__thumbs").slick({
                  slidesToShow: 6,
                  slidesToScroll: 1,
                  arrows: false,
                  fade: false,
                  vertical: true
                });
                if (window.innerWidth <= 768) {
                  jQuery(".oneway .Main--ProductPhotos").slick({
                    slidesToShow: 1,
                    centerMode: true,
                    slidesToScroll: 1,
                    arrows: false,
                    centerPadding: '70px',
                    dots: true
                  });
                }
              {% endif %}

              var productPhotos = document.querySelector(".product__photos");
              if (productPhotos) {
                productPhotos.style.opacity = "1";
              }
            }
          });
        }

        var firstBtnPrimer = document.querySelector(".btn-primer:first-child");
        if (firstBtnPrimer) {
          firstBtnPrimer.click();
        }
      }
    });
  });
{% endif %}

{% if product.type == 'Printed Pattern Scrub Tops' or product.type == 'Men Printed Pattern Scrub Tops' %}
  document.addEventListener("DOMContentLoaded", function() {
    document.addEventListener("click", function(e) {
      if (e.target.classList.contains("btn-primer")) {
        var activerElement = document.querySelector(".activer");
        var capid = activerElement ? activerElement.getAttribute("data-id") : null;
        
        var btnPrimers = document.querySelectorAll(".btn-primer");
        btnPrimers.forEach(function(btn) {
          btn.classList.remove("atv");
        });
        
        e.target.classList.add("atv");
        
        var capqty = e.target.getAttribute("data-socqty");
        var capavail = e.target.getAttribute("data-socavail");
        
        capqty = parseFloat(e.target.getAttribute("data-socqty"));
        
        var preorderText = document.querySelector(".preorder-text");
        var preorderDate = document.querySelector(".preorderdate");
        var capsbundleatc = document.querySelector(".capsbundleatc");

        switch (capid) {
          case "9006869643522":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
              if (preorderDate) {
                preorderDate.innerHTML = "November 30";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          
          case "9006868988162":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
              if (preorderDate) {
                preorderDate.innerHTML = "November 30";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          
          case "9006867874050":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
              if (preorderDate) {
                preorderDate.innerHTML = "November 30";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          
          case "9007946039554":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
              if (preorderDate) {
                preorderDate.innerHTML = "November 30";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          
          case "9007522611458":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
              if (preorderDate) {
                preorderDate.innerHTML = "November 30";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          
          case "8704463831298":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
              if (preorderDate) {
                preorderDate.innerHTML = "November 30";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          
          case "8808183202050":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
              if (preorderDate) {
                preorderDate.innerHTML = "November 30";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          
          case "8296907473154":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
              if (preorderDate) {
                preorderDate.innerHTML = "November 30";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          
          case "8405151285506":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
              if (preorderDate) {
                preorderDate.innerHTML = "November 30";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          
          case "8405155021058":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
              if (preorderDate) {
                preorderDate.innerHTML = "November 30";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          
          case "8687498756354":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
              if (preorderDate) {
                preorderDate.innerHTML = "November 30";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          
          case "8687500263682":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.innerHTML = "November 30";
                preorderText.style.display = "block";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          
          case "8687501050114":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          
          case "8687501902082":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
              if (preorderDate) {
                preorderDate.innerHTML = "November 30";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;

          case "8687503212802":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          
          case "8687504294146":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          
          case "8405151645954":
            if ((capqty <= 0) && (capavail == 'true')) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "PRE-ORDER";
              }
              if (preorderText) {
                preorderText.style.display = "block";
              }
              if (preorderDate) {
                preorderDate.innerHTML = "November 30";
              }
            } else {
              if (capavail == 'true') {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "ADD TO CART";
                }
              } else {
                if (preorderText) {
                  preorderText.style.display = "none";
                }
                if (capsbundleatc) {
                  capsbundleatc.innerHTML = "SOLD OUT";
                }
              }
            }
            break;
          
          default:
            if (e.target.classList.contains("butttonsoldout")) {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "SOLD OUT";
                capsbundleatc.classList.add("soldoutx");
              }
            } else {
              if (capsbundleatc) {
                capsbundleatc.innerHTML = "ADD TO CART";
                capsbundleatc.classList.remove("soldoutx");
              }
            }
        }

        var alttag = e.target.innerHTML;
        var thumbImg = document.querySelector(".product__thumb-item img[alt='" + alttag + "']");
        if (thumbImg && typeof jQuery !== 'undefined') {
          jQuery(thumbImg).trigger("click");
        }
        
        var allImgs = document.querySelectorAll("img[alt='" + alttag + "']");
        allImgs.forEach(function(img) {
          var productSlide = img.closest(".product__slide");
          if (productSlide) {
            var index = productSlide.getAttribute('data-index');
            var mainProductPhotos = document.querySelector(".Main--ProductPhotos");
            if (mainProductPhotos && typeof jQuery !== 'undefined' && jQuery.fn.slick) {
              jQuery(mainProductPhotos).slick('slickGoTo', index);
            }
          }
        });
      }
    });

    var interval = setInterval(function() {
      var imageOverlay = document.querySelector(".scrubs-products .image-overlay[data-handle='{{ product.handle }}']");
      if (imageOverlay) {
        imageOverlay.click();
        var firstBtnPrimer = document.querySelector(".btn-primer:first-child");
        if (firstBtnPrimer) {
          firstBtnPrimer.click();
        }
        clearInterval(interval);
      } else {
        var capsbundleatc = document.querySelector(".capsbundleatc");
        var btnPrimers = document.querySelectorAll(".btn-primer");
        
        if (capsbundleatc) {
          capsbundleatc.innerHTML = "SOLD OUT";
          capsbundleatc.classList.add("soldoutx");
        }
        
        btnPrimers.forEach(function(btn) {
          btn.style.display = "none";
        });
        
        clearInterval(interval);
      }
    }, 1000);

    var capsbundleatc = document.querySelector(".capsbundleatc");
    if (capsbundleatc) {
      capsbundleatc.addEventListener("click", function() {
        this.innerHTML = "Preparing..";

        var atvElement = document.querySelector(".atv");
        if (atvElement) {
          var socvarid = atvElement.getAttribute("data-socvarid");
          var socavail = atvElement.getAttribute("data-socavail");

          if (socavail && typeof jQuery !== 'undefined') {
            var dataxc = {
              "id": socvarid,
              "quantity": 1
            };

            jQuery.ajax({
              type: 'POST',
              url: '/cart/add.js',
              data: dataxc,
              dataType: 'json',
              success: function() {
                capsbundleatc.innerHTML = "ADD TO CART";
                if (typeof cart_open === 'function') {
                  cart_open();
                }
              }
            });
          }
        }
      });
    }

    function addToCart(productsJson) {
      if (typeof jQuery !== 'undefined') {
        jQuery.ajax({
          type: 'POST',
          url: '/cart/add.js',
          data: {
            items: products
          },
          dataType: 'json',
          success: function() {
            alert("Products added to the cart.");
            if (typeof cart_open === 'function') {
              cart_open();
            }
          },
          error: function(jqXHR, textStatus, errorThrown) {
            if (typeof cart_open === 'function') {
              cart_open();
            }
          }
        });
      }
    }

    document.addEventListener("click", function(e) {
      if (e.target.classList.contains("image-overlay")) {
        var preorderText = document.querySelector(".preorder-text");
        var capsbundleatc = document.querySelector(".capsbundleatc");
        var btnPrimers = document.querySelectorAll(".btn-primer");
        
        if (preorderText) {
          preorderText.style.display = "none";
        }
        if (capsbundleatc) {
          capsbundleatc.innerHTML = "ADD TO BAG";
          capsbundleatc.classList.remove("soldoutx");
        }
        
        btnPrimers.forEach(function(btn) {
          btn.style.display = "block";
        });

        var imageOverlays = document.querySelectorAll(".image-overlay");
        imageOverlays.forEach(function(overlay) {
          overlay.classList.remove("activer");
        });
        
        e.target.classList.add("activer");
        
        var caphandle = e.target.getAttribute("data-handle");
        var captitle = e.target.getAttribute("data-title");
        var capid = e.target.getAttribute("data-id");
        var capimage = e.target.getAttribute("data-image");
        var capurl = e.target.getAttribute("data-url");
        var capxlid = e.target.getAttribute("data-xl+");
        var capxlavail = e.target.getAttribute("data-xl+-avail");
        var capstandardid = e.target.getAttribute("data-standard");
        var capstandardavail = e.target.getAttribute("data-standard-avail");
        var capsprice = e.target.getAttribute("data-price");
        var capscompare = e.target.getAttribute("data-compare");

        var inputs = e.target.querySelectorAll("input");
        var righthere = document.querySelector(".righthere");
        
        if (righthere) {
          inputs.forEach(function(input, i) {
            var socname = input.getAttribute("name");
            var socavail = input.getAttribute("data-socavail");
            var socvarid = input.getAttribute("data-socvarid");
            var xsocqty = input.getAttribute("data-socqty");

            if (i === 0) {
              righthere.innerHTML = "";
              if (socavail == 'true') {
                righthere.innerHTML += "<span class='btn-primer " + socname + " atv' data-socvarid='" + socvarid + "' data-socname='" + socname + "' data-socqty='" + xsocqty + "' data-socavail='" + socavail + "'>" + socname + "</span>";
              } else {
                righthere.innerHTML += "<span class='btn-primer " + socname + " butttonsoldout' data-socvarid='" + socvarid + "' data-socavail='" + socavail + "' data-socname='" + socname + "' data-socqty='" + xsocqty + "' >" + socname + "</span>";
              }
            } else {
              if (socavail == 'true') {
                righthere.innerHTML += "<span class='btn-primer " + socname + "' data-socvarid='" + socvarid + "' data-socavail='" + socavail + "' data-socname='" + socname + "' data-socqty='" + xsocqty + "' >" + socname + "</span>";
              } else {
                righthere.innerHTML += "<span class='btn-primer  " + socname + " butttonsoldout' data-socvarid='" + socvarid + "' data-socavail='" + socavail + "' data-socname='" + socname + "' data-socqty='" + xsocqty + "' >" + socname + "</span>";
              }
            }
          });
        }

        var productPrices = document.querySelector(".product-single__prices");
        if (productPrices) {
          if (typeof capscompare === 'undefined' || capscompare == '$0.00' || capscompare == '') {
            productPrices.innerHTML = '<span data-price="" class="9 normalPrice product__price" data-product-price="">' + capsprice + '</span>';
          } else {
            productPrices.innerHTML = '<span class=" normal_price" data-price-wrapper=""><span class="1 product__price product__price--compare" data-product-price-compare="">' + capscompare + '</span></span>    <span data-price="" class="2 normalPrice product__price sale-price" data-product-price="">' + capsprice + '<span style="margin-bottom:12px;color:black; font-size: medium;display:inline-block"></span></span>';
          }
        }

        var capstandardidInput = document.querySelector(".capstandardid");
        var capxlidInput = document.querySelector(".capxlid");
        var productTitle = document.querySelector(".product-single__title");
        
        if (capstandardidInput) {
          capstandardidInput.value = capstandardid;
        }
        if (capxlidInput) {
          capxlidInput.value = capxlid;
        }
        if (productTitle) {
          productTitle.innerHTML = captitle;
        }
        
        function disableJavaScript(html) {
          return html.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '');
        }

        if (typeof jQuery !== 'undefined') {
          jQuery.ajax({
            type: "GET",
            url: capurl,
            datatype: "HTML",
            beforeSend: function() {},
            complete: function() {
              setTimeout(function() {
                var productPhotos = document.querySelector(".product__photos");
                if (productPhotos) {
                  productPhotos.style.opacity = "1";
                }
              }, 1);
            },
            success: function(t) {
              t = disableJavaScript(t);
              var tempDiv = document.createElement('div');
              tempDiv.innerHTML = t;
              
              var onewayPhotos = tempDiv.querySelector(".oneway.product__photos");
              var collapsibleContent = tempDiv.querySelector(".collapsible-content:first-of-type .collapsible-content__inner");
              
              var currentOnewayPhotos = document.querySelector(".oneway.product__photos");
              var currentCollapsibleContent = document.querySelector(".collapsible-content:first-of-type .collapsible-content__inner");
              
              if (currentOnewayPhotos && onewayPhotos) {
                currentOnewayPhotos.innerHTML = onewayPhotos.innerHTML;
              }
              if (currentCollapsibleContent && collapsibleContent) {
                currentCollapsibleContent.innerHTML = collapsibleContent.innerHTML;
              }
              
              {% if template.suffix == 'os2printedtopsbundle' or template.suffix == 'sl-36C42638' %}
                jQuery(".oneway .product__thumbs").slick({
                  slidesToShow: 6,
                  slidesToScroll: 1,
                  arrows: false,
                  fade: false,
                  vertical: true
                });
                
                if (window.innerWidth <= 768) {
                  jQuery(".oneway .Main--ProductPhotos").slick({
                    asNavFor: '',
                    arrows: true,
                    dots: false,
                    initialSlide: 0,
                    centerMode: false,
                    centerPadding: '0px',
                    slidesToScroll: 2,
                    slidesToShow: 2,
                    infinite: true
                  });
                }
              {% else %}
                jQuery(".oneway .product__thumbs").slick({
                  slidesToShow: 6,
                  slidesToScroll: 1,
                  arrows: false,
                  fade: false,
                  vertical: true
                });
                
                if (window.innerWidth <= 768) {
                  jQuery(".oneway .Main--ProductPhotos").slick({
                    slidesToShow: 1,
                    centerMode: true,
                    slidesToScroll: 1,
                    arrows: false,
                    centerPadding: '70px',
                    dots: true
                  });
                }
              {% endif %}
              
              var productPhotos = document.querySelector(".product__photos");
              if (productPhotos) {
                productPhotos.style.opacity = "1";
              }
            }
          });
        }
        
        var firstBtnPrimer = document.querySelector(".btn-primer:first-child");
        if (firstBtnPrimer) {
          firstBtnPrimer.click();
        }
      }
    });
  });
{% endif %}

{% if template.suffix == 'atheltikan' %}
  document.addEventListener("DOMContentLoaded", function() {
    // Slick slider code commented out in original
  });
{% endif %}

// Collection slider
document.addEventListener("DOMContentLoaded", function() {
  if (typeof jQuery !== 'undefined' && jQuery.fn.slick) {
    jQuery('.collection-thumbnail').on('init', function(event, slick, direction) {
      setTimeout(function() {
        // Code commented out in original
      }, 3000);
    });

    {% if collection.handle contains "women" %}
      jQuery('.collection-thumbnail').slick({
        infinite: true,
        slidesToShow: 6,
        arrows: false,
        slidesToScroll: 2,
        responsive: [{
          breakpoint: 480,
          settings: {
            slidesToShow: 4,
            arrows: true
          }
        }]
      });
    {% else %}
      {% if collection.handle contains "men" %}
        jQuery('.collection-thumbnail').slick({
          infinite: true,
          slidesToShow: 4,
          arrows: false,
          slidesToScroll: 2,
          responsive: [{
            breakpoint: 480,
            settings: {
              slidesToShow: 4,
              arrows: true
            }
          }]
        });
      {% else %}
        jQuery('.collection-thumbnail').slick({
          infinite: true,
          slidesToShow: 8,
          arrows: false,
          slidesToScroll: 2,
          responsive: [{
            breakpoint: 480,
            settings: {
              slidesToShow: 4,
              arrows: true
            }
          }]
        });
      {% endif %}
    {% endif %}
  }
});

// Meta Pixel Code
{% if page.handle == "claimgift" %}
  !function(f, b, e, v, n, t, s) {
    if (f.fbq) return;
    n = f.fbq = function() {
      n.callMethod ? n.callMethod.apply(n, arguments) : n.queue.push(arguments)
    };
    if (!f._fbq) f._fbq = n;
    n.push = n;
    n.loaded = true;
    n.version = '2.0';
    n.queue = [];
    t = b.createElement(e);
    t.async = true;
    t.src = v;
    s = b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t, s)
  }(window, document, 'script', 'https://connect.facebook.net/en_US/fbevents.js');
  
  fbq('init', '645105989386037');
  fbq('track', 'PageView');
{% endif %}

// AOS init
if (typeof AOS !== 'undefined') {
  AOS.init();
}

// Gift form submit
{% if product.handle contains "gift" %}
  document.addEventListener("DOMContentLoaded", function() {
    var productForm = document.querySelector('.product-single__form');
    if (productForm) {
      productForm.addEventListener('submit', function(e) {
        e.preventDefault();
        if (typeof cart_open === 'function') {
          cart_open();
        }
      });
    }
  });
{% endif %}

// Landing page click trigger - make navy
{% if product.handle == "dr-woof-scrub-set" %}
  document.addEventListener("DOMContentLoaded", function() {
    var interval = setInterval(function() {
      var navyVariant = document.querySelector(".product_One_Shown .variant-input[data-value='Navy']");
      if (navyVariant && typeof jQuery !== 'undefined') {
        jQuery(navyVariant).trigger("click");
      }
    }, 1000);

    setTimeout(function() {
      clearInterval(interval);
    }, 5000);
  });
{% endif %}

// UGS video functionality
document.addEventListener("DOMContentLoaded", function() {
  function setupVideoClick(selector, targetClass) {
    var element = document.querySelector(selector);
    if (element) {
      element.addEventListener("click", function() {
        var ugsContainerPopup = document.querySelector(".ugs_container_popup");
        if (ugsContainerPopup) {
          ugsContainerPopup.style.display = "flex";
          var videoContainers = ugsContainerPopup.querySelectorAll(".video-container");
          videoContainers.forEach(function(container) {
            container.style.display = "none";
          });
          
          var targetContainer = ugsContainerPopup.querySelector("." + targetClass);
          if (targetContainer) {
            targetContainer.style.display = "block";
            var video = targetContainer.querySelector("video");
            if (video) {
              video.play();
            }
          }
        }
      });
    }
  }
  
  setupVideoClick(".ugs_container .video-container.zero1", "zero1");
  setupVideoClick(".ugs_container .video-container.zero2", "zero2");
  setupVideoClick(".ugs_container .video-container.zero3", "zero3");
  setupVideoClick(".ugs_container .video-container.zero4", "zero4");
  setupVideoClick(".video-wrapper.zero1", "zero1");
  setupVideoClick(".video-wrapper.zero2", "zero2");
  setupVideoClick(".video-wrapper.zero3", "zero3");
  setupVideoClick(".video-wrapper.zero4", "zero4");
  
  var downBtn = document.querySelector(".ugs_container .down");
  if (downBtn) {
    downBtn.addEventListener("click", function() {
      var ugsContainerPopup = document.querySelector(".ugs_container_popup");
      if (ugsContainerPopup) {
        ugsContainerPopup.style.display = "flex";
        var videoContainers = ugsContainerPopup.querySelectorAll(".video-container");
        videoContainers.forEach(function(container) {
          container.style.display = "none";
        });
        
        var zero4Container = ugsContainerPopup.querySelector(".zero4");
        if (zero4Container) {
          zero4Container.style.display = "block";
        }
      }
    });
  }
  
  var closeVideoBtn = document.querySelector(".closevideo");
  if (closeVideoBtn) {
    closeVideoBtn.addEventListener("click", function() {
      var ugsContainerPopup = document.querySelector(".ugs_container_popup");
      if (ugsContainerPopup) {
        var allVideos = ugsContainerPopup.querySelectorAll("video");
        allVideos.forEach(function(video) {
          video.pause();
        });
        ugsContainerPopup.style.display = "none";
      }
    });
  }
});

// Dr set redirection
{% if product.handle == "dr-woof-scrub-set" %}
  document.addEventListener("DOMContentLoaded", function() {
    var currentPageURL = window.location.href;
    
    if (currentPageURL.indexOf("fbclid") !== -1) {
      window.location.replace("/pages/your-day-in-dr-woof-scrubs");
    }
  });
{% endif %}

// Template redirection
{% if template.suffix contains "sl-526B89C0" %}
  window.addEventListener('load', function() {
    var url = window.location.href;
    var fbclid = new URLSearchParams(window.location.search).get('fbclid');

    if (fbclid) {
      window.location.href = "https://www.drwoofapparel.com.au/pages/5-reasons-our-scrubs-will-make-you-the-talk-of-the-hospital-lp";
    }
  });
{% endif %}

// Klaviyo tracking
{% if product %}
  window.addEventListener('load', function() {
    var _learnq = window._learnq || [];
    
    function addedToCart() {
      fetch(window.location.origin + '/cart.js')
        .then(function(res) {
          return res.clone().json();
        })
        .then(function(data) {
          var cart = {
            total_price: data.total_price / 100,
            value: data.total_price / 100,
            total_discount: data.total_discount,
            original_total_price: data.original_total_price / 100,
            items: data.items
          };
          
          if (typeof item !== 'undefined') {
            cart = Object.assign(cart, item);
          }
          
          if (klAjax) {
            _learnq.push(['track', 'Added to Cart', cart]);
            klAjax = false;
          }
        });
    }
    
    (function(ns, originalFetch) {
      ns.fetch = function() {
        var response = originalFetch.apply(this, arguments);
        response.then(function(res) {
          if ((window.location.origin + '/cart/add.js').includes(res.url) && res.url !== '') {
            addedToCart();
          }
        });
        return response;
      };
    }(window, window.fetch));
    
    var klAjax = true;
    var atcButtons = document.querySelectorAll("form[action*='/cart/add'] button[type='submit']");
    
    for (var i = 0; i < atcButtons.length; i++) {
      atcButtons[i].addEventListener("click", function() {
        if (klAjax) {
          _learnq.push(['track', 'Added to Cart', item]);
          klAjax = false;
        }
      });
    }
  });
{% endif %}

// Bag trigger
{% if product.handle contains "bag" %}
  document.addEventListener("DOMContentLoaded", function() {
    var interval = setInterval(function() {
      var activerElement = document.querySelector(".activer");
      if (activerElement && typeof jQuery !== 'undefined') {
        jQuery(activerElement).trigger("click");
      }
    }, 500);

    setTimeout(function() {
      clearInterval(interval);
    }, 2000);
  });
{% endif %}

// Remove AUD currency text
document.addEventListener("DOMContentLoaded", function() {
  var selectors = [
    '.grid-product__price span',
    '.totalin',
    '.qb-price-item',
    '.qb-price-item span',
    '.discounted'
  ];

  selectors.forEach(function(selector) {
    var elements = document.querySelectorAll(selector);
    elements.forEach(function(el) {
      el.textContent = el.textContent.replace('AUD', '').trim();
    });
  });
});
</script>